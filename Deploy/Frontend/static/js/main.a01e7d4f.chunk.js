(this["webpackJsonpui-frontend"]=this["webpackJsonpui-frontend"]||[]).push([[0],{12:function(e,t,n){},16:function(e,t,n){},22:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n(24),c=n.n(a),i=n(26),o=n(4),r=n(2),l=n(3),d=n(9),u=n(8),j=function e(){Object(r.a)(this,e)};j.getFileSizeUnit=function(e){for(var t=0;e/1024>=1;)e/=1024,t+=1;return Math.round(1e4*e)/1e4+" "+["","K","M","G"][t]+"B"},j.getCurrentTimestamp=function(e){var t=e.getDate(),n=e.getMonth(),s=e.getFullYear(),a=e.getHours(),c=e.getMinutes();return(t<10?"0"+t:t)+"/"+(n<10?"0"+(n+1):n+1)+"/"+s+" "+(a<10?"0"+a:a)+":"+(c<10?"0"+c:c)},j.getCurrentTimestampForLogging=function(e){var t=new Date,n=t.getFullYear(),s=t.getMonth()+1,a=t.getDate(),c=t.getHours(),i=t.getMinutes(),o=e.split(" ");return o[1].includes("minute")?i-=parseInt(o[0]):o[1].includes("hour")?c-=parseInt(o[0]):o[1].includes("day")?a-=parseInt(o[0]):o[1].includes("week")?a-=7*parseInt(o[0]):o[1].includes("month")?s-=parseInt(o[0]):o[1].includes("year")&&(n-=parseInt(o[0])),"".concat(n,"-").concat(s,"-").concat(a,"%20").concat(c,":").concat(i)},j.getFileExtension=function(e){var t=e.split(".");return t[t.length-1]},j.getFileType=function(e){var t=j.getFileExtension(e);return["jpg","jpeg","png","ico","gif"].includes(t)?"image":["msi","exe"].includes(t)?"exe":"text"},j.setHeaderLayout=function(e){var t=["log_redirector","content-table_redirector","storage-table_redirector","nodes-status_redirector","replication-status_redirector"],n=["upload_redirector","home_redirector","profile_data"];t.concat(n).forEach((function(e){document.getElementById(e).style.display="none"})),"START"!==e&&("ADMIN"===e?t.forEach((function(e){document.getElementById(e).style.display="block"})):n.forEach((function(e){document.getElementById(e).style.display="block"})))},j.prepareURLQuery=function(e){var t=[];return null!==e.node_address&&"ALL"!==e.node_address&&t.push("node_address=".concat(e.node_address)),null!==e.message_type&&"ALL"!==e.message_type&&t.push("message_type=".concat(e.message_type)),t.length>0?"?"+t.join("&"):""},j.sanitizeURL=function(e){return e.replace(".","%2E").replace("_","%5F")};var h=n(45),b=function e(){Object(r.a)(this,e)};b.rest_api="http://localhost:8085/api",b.frontend_proxy="http://127.0.0.100:8090/proxy",b.available_logos=["c#","c","cpp","css","html","java","jpg","js","json","pdf","png","py","svg","txt","xml"],b.getWebSocket=function(){return new Promise((function(e){var t=new h.a({brokerURL:"ws://127.0.0.100:8090/wbsocket",reconnectDelay:10,heartbeatIncoming:3e3,heartbeatOutgoing:3e3,onConnect:function(){console.log("Websocket connected!"),e(t)},onDisconnect:function(){console.log("Websocket disconnected.")}});t.activate()}))};var m=function e(){Object(r.a)(this,e)};m.handleErrorStatus=function(e){return new Promise((function(t){var n=e.status,s=0;e.json().then((function(e){401===n&&(s=401,null!==e["error status"]&&e["error status"].includes("expired")?(e["error status"]="You session expired. Please try to reauthenticate.",alert("Sesiunea a expirat! Incercati sa va reautentificati!"),s=402):e["error status"]="Internal error. We are sorry."),t({code:s,message:e["error status"]})}))}))};var p=function e(){Object(r.a)(this,e)};p.basicCredentialsCheck=function(e){var t=[!0,null],n=['"'," ","/",";",":"],s={};try{Object.keys(e).forEach((function(a){if(""===e[a])throw t=[!1,"Nu ati introdus ".concat(a)],s;n.forEach((function(n){if((" "!==n||"name"!==a)&&e[a].includes(n))throw t=[!1,"".concat(a," contine caractere interzise! (").concat(n,")")],s}))}))}catch(a){return t}return e.email.includes("@")&&e.email.includes(".")?t:[!1,"Username-ul nu respecta formatul unui email."]},p.getAdditionalUserData=function(e){return new Promise((function(t){fetch("".concat(b.rest_api,"/user/search"),{method:"GET",mode:"cors",headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){e.ok?e.json().then((function(e){t({code:1,content:e})})):m.handleErrorStatus(e).then((function(e){t({code:e.code,content:e.message})}))}))}))},p.getUserRole=function(e){return new Promise((function(t){fetch("".concat(b.rest_api,"/user/role"),{method:"GET",mode:"cors",headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){e.ok?e.json().then((function(e){t({code:1,content:e.role})})):m.handleErrorStatus(e).then((function(e){t({code:e.code,content:e.message})}))}))}))},p.getAvailableUserTypes=function(){return new Promise((function(e){fetch("".concat(b.rest_api,"/usertype/all"),{method:"GET",mode:"cors"}).then((function(t){t.ok?t.json().then((function(t){e({code:1,content:t})})):m.handleErrorStatus(t).then((function(t){e({code:t.code,content:t.message})}))}))}))},p.login=function(e){return new Promise((function(t){var n=p.basicCredentialsCheck(e);if(!0===n[0]){var s={username:e.email,password:e.password};fetch("".concat(b.rest_api,"/user/login"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then((function(e){e.ok?e.json().then((function(e){t({code:1,content:e})})):m.handleErrorStatus(e).then((function(e){t({code:e.code,content:e.message})}))}))}else t({code:0,content:n[1]})}))},p.register=function(e){return new Promise((function(t){var n=p.basicCredentialsCheck(e);!0===n[0]?fetch("".concat(b.rest_api,"/user"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){e.ok?e.json().then((function(e){t({code:1,content:e})})):m.handleErrorStatus(e).then((function(e){t({code:e.code,content:e.message})}))})):t({code:0,content:n[1]})}))},p.updateUserTypeInternally=function(e,t){return new Promise((function(n){fetch("".concat(b.frontend_proxy,"/user_type"),{method:"PUT",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({user_type:t})}).then((function(e){e.ok?e.json().then((function(e){n({code:1,content:e})})):m.handleErrorStatus(e).then((function(e){n({code:e.code,content:e.message})}))}))}))},p.updatePlan=function(e,t){return new Promise((function(n){fetch("".concat(b.rest_api,"/user"),{method:"PUT",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({type:t})}).then((function(e){e.ok?e.json().then((function(e){n({code:1,content:e})})):m.handleErrorStatus(e).then((function(e){n({code:e.code,content:e.message})}))}))}))};n(12);var f=n(0),g=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).componentDidMount=function(){j.setHeaderLayout("START"),s.fetchAvailableUserTypes(),s.checkForConnectedUser(),s.fetchUserType()},s.componentDidUpdate=function(){!0===s.state.accountAvailable&&!0===s.state.accountSuccessfullyCreated&&(document.getElementById("status_message").innerHTML="",s.setState({accountSuccessfullyCreated:!1})),!0===s.state.isUserConnected&&""!==s.state.userType&&s.redirect("ADMIN"===s.state.userType?"/ahome":"/uhome")},s.checkForConnectedUser=function(){s.userData=localStorage.getItem("user_data");var e=null!==s.userData&&""!==s.userData;s.setState({isUserConnected:e}),!0===e?(s.userData=JSON.parse(s.userData),document.getElementById("log_data_uname").innerHTML=s.userData.name,document.getElementById("log_data_profile").style.visibility="visible"):(document.getElementById("log_data_uname").innerHTML="",document.getElementById("log_data_profile").style.visibility="hidden")},s.fetchAvailableUserTypes=function(){p.getAvailableUserTypes().then((function(e){1===e.code&&(n.availableUserTypes=e.content)}))},s.fetchUserType=function(){null!==s.userData&&""!==s.userData&&p.getUserRole(s.userData.jwt).then((function(e){1===e.code?s.setState({userType:e.content}):401===e.code&&localStorage.setItem("user_data","")}))},s.login=function(){p.login(s.accountCredentials).then((function(e){1===e.code?(localStorage.setItem("user_data",JSON.stringify(e.content)),s.checkForConnectedUser(),s.fetchUserType(),document.getElementById("logoutButton").style.visibility="visible"):(document.getElementById("status_message").style.display="block",document.getElementById("status_message").style.color="#810000",document.getElementById("status_message").innerHTML=e.content)}))},s.createAccount=function(){p.register(s.accountCredentials).then((function(e){document.getElementById("status_message").style.display="block",1===e.code?(document.getElementById("status_message").innerHTML=e.content["success status"],document.getElementById("status_message").style.color="#206a5d",s.setState({accountSuccessfullyCreated:!0})):(document.getElementById("status_message").style.color="#810000",document.getElementById("status_message").innerHTML=e.content)}))},s.redirect=function(e){""!==e?s.props.history.push({pathname:e,state:{detail:{user_type:s.state.userType}}}):s.props.history.push("/")},document.getElementById("page-name").innerHTML="Login Page",s.userData=localStorage.getItem("user_data"),s.accountCredentials={email:"",password:""},s.state={isUserConnected:!1,userType:"",accountAvailable:!0,accountSuccessfullyCreated:!1},s}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=[];return null!==n.availableUserTypes&&n.availableUserTypes.forEach((function(e){t.push(Object(f.jsx)("option",{value:e.user_type,children:e.user_type},"option_".concat(e.user_type)))})),Object(f.jsxs)("div",{className:"App",children:[Object(f.jsxs)("div",{className:"title",children:[Object(f.jsx)("img",{id:"title_logo",src:"images/logo.png",alt:"Logo not found"}),Object(f.jsx)("label",{id:"title_text",children:"Safestorage"})]}),Object(f.jsx)("hr",{}),!1===this.state.isUserConnected?Object(f.jsxs)("div",{id:"homediv",children:[Object(f.jsxs)("div",{id:"homediv_left",children:[Object(f.jsx)("div",{id:"homediv_imgdiv",children:Object(f.jsx)("img",{id:"homediv_img",src:"/images/mainpage_img.png",alt:""})}),Object(f.jsx)("div",{id:"homediv_descdiv",children:Object(f.jsxs)("p",{children:["File storage and versioning",Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),"The ultimate app for storing and versioning your files in the safest way"]})})]}),Object(f.jsxs)("div",{id:"homediv_right",children:[!0===this.state.accountAvailable?Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{className:"login_header",children:"Log into your account"}),Object(f.jsx)("p",{children:"Email"}),Object(f.jsx)("input",{onChange:function(t){e.accountCredentials.email=t.target.value},type:"email"}),Object(f.jsx)("p",{children:"Password"}),Object(f.jsx)("input",{onChange:function(t){e.accountCredentials.password=t.target.value},type:"password"}),Object(f.jsx)("p",{children:Object(f.jsx)("button",{className:"redirector",onClick:this.login,children:"Autentificare"})})]}):Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{className:"login_header",children:"Create account"}),Object(f.jsx)("p",{children:"Name"}),Object(f.jsx)("input",{onChange:function(t){e.accountCredentials.name=t.target.value},type:"text"}),Object(f.jsx)("p",{children:"Email"}),Object(f.jsx)("input",{onChange:function(t){e.accountCredentials.email=t.target.value},type:"email"}),Object(f.jsx)("p",{children:"Password"}),Object(f.jsx)("input",{onChange:function(t){e.accountCredentials.password=t.target.value},type:"password"}),Object(f.jsx)("p",{children:"User type"}),Object(f.jsx)("select",{onChange:function(t){e.accountCredentials.type=t.target.value},children:t}),Object(f.jsx)("p",{children:"Country"}),Object(f.jsx)("input",{onChange:function(t){e.accountCredentials.country=t.target.value},type:"text"}),Object(f.jsx)("br",{}),Object(f.jsx)("label",{children:Object(f.jsx)("button",{className:"redirector",onClick:this.createAccount,children:"Create account"})})]}),Object(f.jsx)("p",{id:"status_message",children:"gol"}),!0===this.state.accountSuccessfullyCreated?Object(f.jsx)("p",{children:Object(f.jsx)("button",{className:"a_redirector",onClick:function(){e.setState({accountAvailable:!0}),e.accountCredentials={email:"",password:""}},children:"Go to login."})}):Object(f.jsx)("p",{}),!0===this.state.accountAvailable?Object(f.jsxs)("p",{children:["No account ? ",Object(f.jsx)("button",{className:"a_redirector",onClick:function(){document.getElementById("status_message").style.color="#02475e",document.getElementById("status_message").style.display="none",e.setState({accountAvailable:!1}),e.accountCredentials={name:"",email:"",password:"",type:"".concat(n.availableUserTypes[0].user_type),country:""}},children:"Create an account"})]}):Object(f.jsxs)("p",{children:["Have account ? ",Object(f.jsx)("button",{className:"a_redirector",onClick:function(){document.getElementById("status_message").style.color="#02475e",document.getElementById("status_message").style.display="none",e.setState({accountAvailable:!0}),e.accountCredentials={name:"",email:"",password:"",type:"".concat(n.availableUserTypes[0].user_type),country:""}},children:"Sign in"})]})]})]}):Object(f.jsx)("p",{})]})}}]),n}(s.Component);g.availableUserTypes=null;var _=g,x=(n(34),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).componentDidUpdate=function(){n.userDetailsCategories.forEach((function(e){document.getElementById("selector_".concat(e)).style.borderBottom=e===s.state.userDetailsCategory?"3px solid #23049d":"none"})),s.state.userDetailsCategory===n.userDetailsCategories[0]&&null===s.state.additionalUserData&&s.fetchAdditionalUserData()},s.componentDidMount=function(){s.fetchAvailableUserTypes(),s.checkForConnectedUser()},s.fetchAvailableUserTypes=function(){p.getAvailableUserTypes().then((function(e){1===e.code?(n.availableUserTypes={},e.content.forEach((function(e){var t=e.user_type;delete e.user_type,n.availableUserTypes[t]=e}))):console.log(e.content)}))},s.fetchUserType=function(){null!==s.userData&&""!==s.userData&&p.getUserRole(s.userData.jwt).then((function(e){1===e.code?(console.log("role : "+e.content),s.setState({userType:e.content})):401===e.code&&localStorage.setItem("user_data","")}))},s.fetchAdditionalUserData=function(){p.getAdditionalUserData(s.userData.jwt).then((function(e){1===e.code?(s.setState({additionalUserData:e.content}),localStorage.setItem("additional_user_data",JSON.stringify(e.content))):console.log(e.content)}))},s.checkForConnectedUser=function(){s.userData=localStorage.getItem("user_data");var e=null!==s.userData&&""!==s.userData;s.setState({isUserConnected:e}),!0===e?(s.userData=JSON.parse(s.userData),document.getElementById("log_data_uname").innerHTML=s.userData.name,document.getElementById("log_data_profile").style.visibility="visible"):(document.getElementById("log_data_uname").innerHTML="",document.getElementById("log_data_profile").style.visibility="hidden")},s.updatePlan=function(e){document.getElementById("updatePlanStatus").innerHTML="Plan updating to ".concat(e,"..."),p.updatePlan(s.userData.jwt,e).then((function(t){1===t.code?(document.getElementById("updatePlanStatus").innerHTML="Plan successfully changed to ".concat(e,"."),s.fetchAdditionalUserData(),p.updateUserTypeInternally(s.userData.jwt,e).then((function(e){console.log(e),1===e.code&&console.log("User type changed internally also!")}))):console.log(t.content)}))},document.getElementById("page-name").innerHTML="Profile Page",j.setHeaderLayout("USER"),s.userData=localStorage.getItem("user_data"),s.state={isUserConnected:!1,userType:"",userDetailsCategory:n.userDetailsCategories[0],additionalUserData:null},s}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=Object(f.jsx)("div",{}),s=Object(f.jsx)("div",{});if(null!==this.state.additionalUserData)switch(s=Object(f.jsxs)("div",{className:"accountData",children:[Object(f.jsxs)("p",{className:"accountDataField",children:["Name",Object(f.jsx)("span",{className:"accountDataValue",children:this.state.additionalUserData.name})]}),Object(f.jsxs)("p",{className:"accountDataField",children:["Email",Object(f.jsx)("span",{className:"accountDataValue",children:this.state.additionalUserData.email})]}),Object(f.jsxs)("p",{className:"accountDataField",children:["Country",Object(f.jsx)("span",{className:"accountDataValue",children:this.state.additionalUserData.country})]}),Object(f.jsxs)("p",{className:"accountDataField",children:["Account Plan",Object(f.jsx)("span",{className:"accountDataValue",children:this.state.additionalUserData.type})]})]}),this.state.userDetailsCategory){case"storage_status":var a=n.availableUserTypes[this.state.additionalUserData.type].available_storage,c=this.state.additionalUserData.storage_quantity,i=a-c;t=Object(f.jsxs)("div",{className:"accountData",children:[Object(f.jsxs)("p",{className:"accountDataField",children:["Total Storage",Object(f.jsx)("span",{className:"accountDataValue",children:j.getFileSizeUnit(a)})]}),Object(f.jsxs)("p",{className:"accountDataField",children:["Used Storage",Object(f.jsx)("span",{className:"accountDataValue",children:j.getFileSizeUnit(i)})]}),Object(f.jsxs)("p",{className:"accountDataField",children:["Available Storage",Object(f.jsx)("span",{className:"accountDataValue",children:j.getFileSizeUnit(c)})]})]});break;case"plan":var o=[];Object.keys(n.availableUserTypes).forEach((function(t){if(t!==e.state.additionalUserData.type){o.push(Object(f.jsxs)("div",{className:"upgradeplan",children:[Object(f.jsx)("p",{children:t}),Object(f.jsx)("p",{children:j.getFileSizeUnit(n.availableUserTypes[t].available_storage)}),Object(f.jsxs)("p",{children:[n.availableUserTypes[t].price_dollars," $"]}),Object(f.jsxs)("button",{className:"redirector",onClick:function(){return e.updatePlan(t)},children:["Update to ",t]}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{})]},"".concat(0,"_upgradeplan")))}})),t=Object(f.jsxs)("div",{className:"accountData",children:[Object(f.jsx)("p",{children:"Do you want to update your business plan ? "}),Object(f.jsx)("p",{children:"Select one of the followings"}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),o,Object(f.jsx)("p",{id:"updatePlanStatus"})]})}else t=Object(f.jsx)("p",{children:"Fetching user data.."});return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsxs)("div",{className:"title",children:[Object(f.jsx)("img",{id:"title_logo",src:"images/logo.png",alt:"Logo not found"}),Object(f.jsx)("label",{id:"title_text",children:"Safestorage"})]}),Object(f.jsx)("hr",{}),!0===this.state.isUserConnected?Object(f.jsxs)("div",{className:"profile",children:[Object(f.jsxs)("div",{className:"profile_left",children:[Object(f.jsx)("img",{id:"log_data_profile",src:"images/user_logo.png",alt:""}),Object(f.jsx)("p",{id:"username",children:this.userData.name}),Object(f.jsx)("hr",{}),s]}),Object(f.jsxs)("div",{className:"profile_right",children:[Object(f.jsxs)("ul",{children:[Object(f.jsx)("li",{children:Object(f.jsx)("button",{className:"a_redirector",id:"selector_storage_status",href:"#",onClick:function(){e.setState({userDetailsCategory:n.userDetailsCategories[0]})},children:"Storage Status"})}),Object(f.jsx)("li",{children:Object(f.jsx)("button",{className:"a_redirector",id:"selector_plan",href:"#",onClick:function(){e.setState({userDetailsCategory:n.userDetailsCategories[1]})},children:"Plan"})})]}),Object(f.jsx)("hr",{}),t]})]}):Object(f.jsx)("p",{children:"Nu puteti accesa aceasta pagina daca utilizatorul nu este conectat"})]})}}]),n}(s.Component));x.userDetailsCategories=["storage_status","plan"],x.availableUserTypes=null;var O=x,y=function e(){Object(r.a)(this,e)};y.uploadFile=function(e,t,n,s){var a="".concat(b.frontend_proxy,"/upload"),c=localStorage.getItem("additional_user_data");null===c||""===c?p.getAdditionalUserData(t).then((function(e){c=e.content,localStorage.setItem("additional_user_data",JSON.stringify(c))})):c=JSON.parse(c);var i=new FormData;return i.append("file",e),new Promise((function(e){fetch(a,{method:"POST",mode:"cors",body:i,headers:{Authorization:"Bearer ".concat(t),version_description:n,user_type:s,available_storage:c.storage_quantity}}).then((function(t){t.ok?t.json().then((function(t){e({code:1,content:t["success status"]})})):m.handleErrorStatus(t).then((function(t){e({code:t.code,content:t.message})}))}))}))},y.getUserFiles=function(e){var t="".concat(b.frontend_proxy,"/files");return new Promise((function(n){fetch(t,{method:"GET",mode:"cors",headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){e.ok?e.json().then((function(e){n({code:1,content:e})})):m.handleErrorStatus(e).then((function(e){n({code:e.code,content:e.message})}))}))}))},y.getFileHistory=function(e,t){var n="".concat(b.frontend_proxy,"/history?filename=").concat(t);return new Promise((function(t){fetch(n,{method:"GET",mode:"cors",headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){e.ok?e.json().then((function(e){t({code:1,content:e})})):m.handleErrorStatus(e).then((function(e){t({code:e.code,content:e.message})}))}))}))},y.deleteFile=function(e,t,n){var s="".concat(b.frontend_proxy,"/").concat(t);return new Promise((function(t){fetch(s,{method:"DELETE",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({description:n})}).then((function(e){e.ok?e.json().then((function(e){t({code:1,content:e})})):m.handleErrorStatus(e).then((function(e){t({code:e.code,content:e.message})}))}))}))},y.renameFile=function(e,t,n,s){var a="".concat(b.frontend_proxy,"/").concat(t);return new Promise((function(t){fetch(a,{method:"PUT",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({description:s,newname:n})}).then((function(e){e.ok?e.json().then((function(e){t({code:1,content:e})})):m.handleErrorStatus(e).then((function(e){t({code:e.code,content:e.message})}))}))}))},y.downloadFile=function(e,t){var n="".concat(b.frontend_proxy,"/").concat(t);return new Promise((function(t){fetch(n,{method:"GET",mode:"cors",headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){e.ok?e.json().then((function(e){t({code:1,content:e["success status"]})})):m.handleErrorStatus(e).then((function(e){t({code:e.code,content:e.message})}))}))}))};n(22),n(16);var v=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).componentDidMount=function(){j.setHeaderLayout("USER"),s.checkForConnectedUser(),s.fetchUserType().then((function(e){s.fetchUserFiles()}))},s.fetchUserType=function(){return new Promise((function(e){try{s.setState({userType:s.props.location.state.detail.user_type}),e(null)}catch(t){p.getUserRole(s.userData.jwt).then((function(t){1===t.code?s.setState({userType:t.content}):401===t.code&&localStorage.setItem("user_data",""),e(null)}))}}))},s.fetchUserFiles=function(){document.getElementById("number_of_file").innerHTML="",y.getUserFiles(s.userData.jwt).then((function(e){console.log(e),1===e.code?(document.getElementById("number_of_file").innerHTML="Found ".concat(e.content.length," files"),s.setState({userFiles:0===e.content.length?null:e.content})):s.setState({userFiles:null})}))},s.checkForConnectedUser=function(){s.userData=localStorage.getItem("user_data"),null===s.userData||""===s.userData?s.redirect(""):s.userData=JSON.parse(s.userData)},s.redirect=function(e,t){""!==e?(localStorage.setItem("userfile",JSON.stringify(t)),s.props.history.push(e)):s.props.history.push("/")},document.getElementById("page-name").innerHTML="Home Page",s.userData=localStorage.getItem("user_data"),s.description=null,s.newname=null,s.state={isUserConnected:!1,userType:null,accountAvailable:!0,accountSuccessfullyCreated:!1,userFiles:null,currentFileName:null,availableNodes:null,fileDetails:null},s}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=[];return null!==this.state.userType&&null!==this.state.userFiles&&this.state.userFiles.forEach((function(n){var s="/images/file_logo/".concat(n.filename.split(".")[1],".png");b.available_logos.includes(n.filename.split(".")[1])||(s="/images/file_logo/extra.png"),t.push(Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:Object(f.jsx)("img",{alt:"logo",src:s})}),Object(f.jsxs)("td",{className:"table_fname",children:[Object(f.jsx)("p",{children:Object(f.jsx)("button",{className:"a_redirector",style:{fontSize:"90%",textDecoration:"underline"},onClick:function(){return e.redirect("/details",n)},children:"".concat(n.filename+"")})}),Object(f.jsx)("br",{}),Object(f.jsx)("span",{children:"Version : ".concat(n.version)}),Object(f.jsx)("br",{}),Object(f.jsx)("span",{children:"Size : ".concat(j.getFileSizeUnit(n.filesize))})]}),Object(f.jsx)("td",{className:"table_version",children:Object(f.jsx)("p",{children:"".concat(n.version_description)})}),Object(f.jsx)("td",{className:"table_version",children:Object(f.jsx)("p",{children:"".concat(n.hash.toString(16))})})]},"div_".concat(n.filename)))})),Object(f.jsx)("div",{className:"App",children:Object(f.jsx)("div",{className:"Home",children:Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:"home_header",children:[Object(f.jsx)("p",{id:"p_filename",children:"My files"}),Object(f.jsx)("p",{id:"number_of_file",children:"\xa0"})]}),Object(f.jsx)("hr",{id:"mainpage_hr"}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("div",{className:"home_body_main_div",children:null===this.state.userFiles?Object(f.jsxs)("div",{style:{width:"100%"},children:[Object(f.jsx)("img",{src:"/images/not_found.png"}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("p",{children:"No file found!"}),Object(f.jsx)("br",{}),Object(f.jsx)("p",{children:"Please consider uploading a file first!"})]}):Object(f.jsxs)("table",{children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:"Logo"}),Object(f.jsx)("td",{children:"File name"}),Object(f.jsx)("td",{children:"Version Description"}),Object(f.jsx)("td",{children:"Hash"})]})}),Object(f.jsx)("tbody",{children:t})]})})]})})})}}]),n}(s.Component),w=function e(){Object(r.a)(this,e)};w.fetchLog=function(e,t){var n="".concat(b.rest_api,"/log");return n+=j.prepareURLQuery(t),new Promise((function(t){fetch(n,{method:"GET",mode:"cors",headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){e.ok?e.json().then((function(e){t({code:1,content:e})})):m.handleErrorStatus(e).then((function(e){t({code:e.code,content:e.message})}))}))}))},w.fetchAvailableNodesFromAPI=function(e){var t="".concat(b.rest_api,"/internalnode/all");return new Promise((function(n){fetch(t,{method:"GET",mode:"cors",headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){e.ok?e.json().then((function(e){n({code:1,content:e})})):m.handleErrorStatus(e).then((function(e){n({code:e.code,content:e.message})}))}))}))},w.cleanLog=function(e,t){console.log("cleaning log...");var n="".concat(b.rest_api,"/log");return n+=j.prepareURLQuery(t),new Promise((function(t){fetch(n,{method:"DELETE",mode:"cors",headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){e.ok?e.json().then((function(e){t({code:1,content:e})})):m.handleErrorStatus(e).then((function(e){t({code:e.code,content:e.message})}))}))}))},w.fetchNodesStoringFile=function(e,t,n){var s="".concat(b.frontend_proxy,"/nodesforfile?user=").concat(t,"&filename=").concat(j.sanitizeURL(n));return new Promise((function(t){fetch(s,{method:"GET",mode:"cors",headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){e.ok?e.json().then((function(e){t({code:1,content:e})})):m.handleErrorStatus(e).then((function(e){t({code:e.code,content:e.message})}))}))}))},w.fetchNodeData=function(e,t){var n="".concat(b.rest_api,"/internalnode/").concat(t);return new Promise((function(t){fetch(n,{method:"GET",mode:"cors",headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){e.ok?e.json().then((function(e){t({code:1,content:e})})):m.handleErrorStatus(e).then((function(e){t({code:e.code,content:e.message})}))}))}))},w.getFileVersions=function(e,t,n){var s="".concat(b.frontend_proxy,"/versions?filename=").concat(n,"&userid=").concat(t);return new Promise((function(t){fetch(s,{method:"GET",mode:"cors",headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){e.ok?e.json().then((function(e){t({code:1,content:e})})):m.handleErrorStatus(e).then((function(e){t({code:e.code,content:e.message})}))}))}))},w.deleteFileFromInternalNode=function(e,t){var n="".concat(b.frontend_proxy,"/internalnodefile?user=").concat(t.user,"&filename=").concat(t.filename,"&address=").concat(t.address);return new Promise((function(t){fetch(n,{method:"DELETE",mode:"cors",headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){e.ok?e.json().then((function(e){t({code:1,content:e})})):m.handleErrorStatus(e).then((function(e){t({code:e.code,content:e.message})}))}))}))};var S=n(25),E=(n(35),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).componentDidMount=function(){s.checkForConnectedUser(),s.fetchUserType().then((function(e){void 0!==e&&s.fetchAvailableNodes().then((function(e){void 0!==e&&-1===s.state.error_status.code&&(s.adminAction("log"),b.getWebSocket().then((function(e){s.webSocketConnection=e,s.setState({websocket:{connected:!0}},(function(){null!==s.menu_selection&&s.adminAction(s.menu_selection)}))})))}))}))},s.fetchAvailableNodes=function(){return new Promise((function(e){w.fetchAvailableNodesFromAPI(s.userData.jwt).then((function(t){1===t.code?(s.setState({availableNodes:t.content}),e(null)):(s.setState({error_status:{code:t.code,message:t.content}}),401===t.code||402===t.code?e(void 0):e(null))}))}))},s.fetchUserType=function(){return new Promise((function(e){try{s.setState({userType:s.props.location.state.detail.user_type}),e(null)}catch(t){p.getUserRole(s.userData.jwt).then((function(t){1===t.code?(s.setState({userType:t.content}),e(null)):(s.setState({error_status:{code:t.code,message:t.content}}),401===t.code||402===t.code?e(void 0):e(null))}))}}))},s.checkForConnectedUser=function(){s.userData=localStorage.getItem("user_data"),null===s.userData||""===s.userData?s.redirect(""):s.userData=JSON.parse(s.userData)},s.handleContentTable=function(e){if(e.body){var t=JSON.parse(e.body);console.log(t),t.length>0?s.setState({content:t}):s.setState({content:void 0})}},s.fetchFileVersions=function(e,t){w.getFileVersions(s.userData.jwt,e,t).then((function(e){1===e.code?(s.setState({file_versions:e.content}),document.getElementById("replication_nodes_div").style.display="none",document.getElementById("versions_nodes_div").style.display="block",document.getElementById("subject_filename").innerHTML=t):s.setState({error_status:{code:e.code,message:e.content}})}))},s.handleReplicationManagerStatus=function(e){if(e.body){var t=JSON.parse(e.body);console.log(t),t.length>0?s.setState({replication_status:t}):s.setState({replication_status:void 0})}},s.handleConnectionTable=function(e){if(e.body){var t=JSON.parse(e.body),n=s.state.connectionTable.status,a=s.state.connectionTable.current_address;s.setState({connectionTable:{addresses:t,status:n,current_address:a}})}},s.handleNodesActivity=function(e){if(e.body){var t=s.state.connectionTable.addresses,n=s.state.connectionTable.current_address;s.setState({connectionTable:{addresses:t,status:JSON.parse(e.body),current_address:n}})}},s.highlightNodeStatus=function(e,t){var n=null,a=null;0===t?(n=s.state.connectionTable.addresses,a="node_status_address"):1===t&&(n=Object.keys(s.state.storagestatus),a="storage_status_address"),n.forEach((function(t){t===e?(document.getElementById("".concat(a,"_").concat(t)).style.fontSize="125%",document.getElementById("".concat(a,"_").concat(t)).style.color="#39A9CB"):(document.getElementById("".concat(a,"_").concat(t)).style.fontSize="105%",document.getElementById("".concat(a,"_").concat(t)).style.color="#344fa1")}))},s.handleStorageStatus=function(e){if(e.body){var t={},n=s.state.current_address,a=JSON.parse(e.body);a.length>0?(a.forEach((function(e){e.nodesAddresses.forEach((function(s){null===n&&(n=s);var a=[];Object.keys(t).includes(s)&&(a=t[s]),a.push(e),t[s]=a}))})),s.setState({storagestatus:t,current_address:n})):s.setState({storagestatus:void 0,current_address:null})}},s.adminAction=function(e){if(401!==s.state.error_status.code&&402!==s.state.error_status.code){s.menu_selection=e;["admin_log_view","admin_content_view","admin_nodes_view","admin_replication_view","admin_storagestatus_view"].forEach((function(e){document.getElementById(e).style.display="none"})),!0===s.state.websocket.connected&&void 0!==s.state.websocket.subscriptions&&s.state.websocket.subscriptions.forEach((function(e){return e.unsubscribe()}));var t=[],n=[];switch(e){case"log":document.getElementById("admin_log_view").style.display="block",document.getElementById("admin_title").innerHTML="Log Data",s.fetchLogByCriteriaUpdate(null,null);break;case"content":document.getElementById("admin_content_view").style.display="block",document.getElementById("admin_title").innerHTML="Content Table",t=["/topic/content"],n=[s.handleContentTable];break;case"storage":document.getElementById("admin_storagestatus_view").style.display="block",document.getElementById("admin_title").innerHTML="Storage Status Table",t=["/topic/storage"],n=[s.handleStorageStatus];break;case"nodes":document.getElementById("admin_nodes_view").style.display="block",document.getElementById("admin_title").innerHTML="Nodes Status Table",t=["/topic/nodes","/topic/connection"],n=[s.handleNodesActivity,s.handleConnectionTable];break;case"replication":document.getElementById("admin_replication_view").style.display="block",document.getElementById("admin_title").innerHTML="Replication Status",t=["/topic/replication"],n=[s.handleReplicationManagerStatus]}if(!0===s.state.websocket.connected){var a=[],c=0;t.forEach((function(e){var t=n[c];a.push(s.webSocketConnection.subscribe(e,(function(e){return t(e)}))),c+=1})),s.setState({websocket:{connected:!0,subscriptions:a}})}}},s.fetchLogByCriteriaUpdate=function(e,t){null!==e&&null!==t&&(s.logCriteria[e]=t),w.fetchLog(s.userData.jwt,s.logCriteria).then((function(e){1===e.code?s.setState({log:e.content}):s.setState({log:[]})}))},s.cleanLog=function(){w.cleanLog(s.userData.jwt,s.logCriteria).then((function(e){1===e.code?s.fetchLogByCriteriaUpdate(null,null):s.setState({error_status:{code:e.code,message:e.content}})}))},s.fetchReplicationNodesForFile=function(e,t){s.setState({content_nodes_data:[]}),w.fetchNodesStoringFile(s.userData.jwt,e,t).then((function(e){1===e.code?(document.getElementById("replication_nodes_div").style.display="block",document.getElementById("versions_nodes_div").style.display="none",document.getElementById("subject_filename").innerHTML=t,e.content.forEach((function(e){w.fetchNodeData(s.userData.jwt,e).then((function(e){if(1===e.code){var t=s.state.content_nodes_data;t.push(e.content),s.setState({content_nodes_data:t})}else s.setState({error_status:{code:e.code,message:e.content}})}))}))):s.setState({error_status:{code:e.code,message:e.content}})}))},s.deleteFileFromInternalNode=function(){w.deleteFileFromInternalNode(s.userData.jwt,s.selectedFile).then((function(e){1===e.code?document.getElementById("storagestatus_delete_status").style.visibility="visible":s.setState({error_status:{code:e.code,message:e.content}})}))},s.redirect=function(e){""!==e?s.props.history.push(e):s.props.history.push("/")},document.getElementById("page-name").innerHTML="Admin console",s.userData=localStorage.getItem("user_data"),s.menu_selection=null,s.state={isUserConnected:!1,userType:null,accountAvailable:!0,availableNodes:null,log:null,replication_status:null,content:null,content_nodes_data:null,file_versions:null,storagestatus:null,current_address:null,connectionTable:{addresses:null,status:null,current_address:null},websocket:{connected:!1,subscriptions:null},error_status:{code:-1,message:""}},s.logCriteria={message_type:"ALL",node_address:"ALL",date1:j.getCurrentTimestampForLogging("1 year")},s.webSocketConnection=null,s.selectedFile=null,j.setHeaderLayout("ADMIN"),document.getElementById("log_redirector").onclick=function(){return s.adminAction("log")},document.getElementById("content-table_redirector").onclick=function(){return s.adminAction("content")},document.getElementById("storage-table_redirector").onclick=function(){return s.adminAction("storage")},document.getElementById("nodes-status_redirector").onclick=function(){return s.adminAction("nodes")},document.getElementById("replication-status_redirector").onclick=function(){return s.adminAction("replication")},s}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=[],n=[],s=[],a=[],c=[],i={addresses:[],files:[],additional_data:[]},o={addresses:[],status:[]},r=[];if(null!==this.state.userType&&402!==this.state.code){if(null!=this.state.availableNodes&&this.state.availableNodes.forEach((function(e){s.push(Object(f.jsx)("option",{value:e.ip_address,children:e.ip_address},"optionkey_".concat(e.ip_address)))})),null!==this.state.log&&this.state.log.forEach((function(e){a.push(Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:Object(f.jsx)("p",{children:e.node_address})}),Object(f.jsx)("td",{children:Object(f.jsx)("p",{children:e.message_type})}),Object(f.jsx)("td",{children:Object(f.jsx)("p",{children:e.description})}),Object(f.jsx)("td",{children:Object(f.jsx)("p",{children:j.getCurrentTimestamp(new Date(e.register_date))})})]},"log_".concat(e.registerId)))})),null!==this.state.content&&(document.getElementById("admin_view_title_0").style.visibility="hidden",void 0!==this.state.content&&this.state.content.forEach((function(t){c.push(Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:Object(f.jsx)("p",{children:t.userId})}),Object(f.jsx)("td",{children:Object(f.jsx)("p",{children:t.filename})}),Object(f.jsx)("td",{children:"[DELETED]"===t.status||"[RENAMED]"===t.status?Object(f.jsx)("p",{children:t.versionNo}):Object(f.jsx)("p",{children:Object(f.jsx)("button",{className:"a_redirector",style:{fontSize:"120%",textDecoration:"underline"},onClick:function(){e.fetchFileVersions(t.userId,t.filename)},onMouseOver:function(){document.getElementById("admin_view_title_1").style.visibility="visible",document.getElementById("admin_view_title_1").innerHTML="Click to see the version of this file"},onMouseLeave:function(){document.getElementById("admin_view_title_1").style.visibility="hidden"},children:t.versionNo})})}),Object(f.jsx)("td",{children:Object(f.jsx)("p",{children:t.crc.toString(16)})}),Object(f.jsx)("td",{children:Object(f.jsx)("p",{children:j.getFileSizeUnit(t.fileSize)})}),Object(f.jsx)("td",{children:"[DELETED]"===t.status||"[RENAMED]"===t.status?Object(f.jsx)("p",{children:t.replication_factor}):Object(f.jsx)("p",{children:Object(f.jsx)("button",{className:"a_redirector",style:{fontSize:"120%",textDecoration:"underline"},onClick:function(){return e.fetchReplicationNodesForFile(t.userId,t.filename)},onMouseOver:function(){document.getElementById("admin_view_title_1").style.visibility="visible",document.getElementById("admin_view_title_1").innerHTML="Click to see the nodes that store this file"},onMouseLeave:function(){document.getElementById("admin_view_title_1").style.visibility="hidden"},children:t.replication_factor})})}),Object(f.jsx)("td",{children:Object(f.jsx)("p",{children:t.status})})]},"content_".concat(t.userId,"_").concat(t.filename)))}))),null!==this.state.file_versions&&this.state.file_versions.forEach((function(e){n.push(Object(f.jsxs)("p",{className:"admin_view_title",style:{fontSize:"90%"},children:[e.version_no,". ",e.version_desc," (",e.version_hash.toString(16),")"]})),n.push(Object(f.jsx)("br",{}))})),null!==this.state.content_nodes_data&&this.state.content_nodes_data.forEach((function(e){t.push(Object(f.jsx)("div",{children:Object(f.jsxs)("p",{className:"admin_view_title",style:{fontSize:"90%"},children:[e.ip_address," from ",e.location_country]})}))})),null!==this.state.storagestatus&&void 0!==this.state.storagestatus&&(t=[],i.addresses=[],Object.keys(this.state.storagestatus).forEach((function(t){i.addresses.push(Object(f.jsx)("button",{id:"storage_status_address_".concat(t),className:"a_redirector",href:"#",style:{marginTop:"-15%"},onClick:function(){e.setState({current_address:t}),document.getElementById("storage_additional_data").style.visibility="hidden",document.getElementById("storagestatus_delete_status").style.visibility="hidden",document.getElementById("subject_filename_1").innerHTML="",e.highlightNodeStatus(t,1)},children:t}))}))),null!==this.state.current_address&&void 0!==this.state.current_address&&(i.files=[],console.log(this.state.storagestatus[this.state.current_address]),void 0!==this.state.storagestatus[this.state.current_address]&&this.state.storagestatus[this.state.current_address].forEach((function(t){var n=t.nodesAddresses.indexOf(e.state.current_address),s=[];t.nodesAddresses.forEach((function(t){t!==e.state.current_address&&s.push(Object(f.jsx)("p",{style:{display:"block",fontSize:"80%"},children:t}))})),i.files.push(Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:Object(f.jsx)("p",{children:t.userId})}),Object(f.jsx)("td",{children:Object(f.jsx)("p",{children:Object(f.jsx)("button",{className:"a_redirector",style:{fontSize:"120%",textDecoration:"underline"},onClick:function(){document.getElementById("storagestatus_delete_status").style.visibility="hidden",document.getElementById("storage_additional_data").style.visibility="visible",document.getElementById("subject_filename_1").innerHTML=t.filename,e.selectedFile={user:t.userId,filename:t.filename,address:e.state.current_address}},onMouseOver:function(){document.getElementById("admin_view_title_11").style.visibility="visible",document.getElementById("admin_view_title_11").innerHTML="Click for more details about this file"},onMouseLeave:function(){document.getElementById("admin_view_title_11").style.visibility="hidden"},children:t.filename})})}),Object(f.jsx)("td",{children:Object(f.jsx)("p",{children:t.nodesVersions[n]})}),Object(f.jsx)("td",{children:Object(f.jsx)("p",{children:t.nodesCRCs[n].toString(16)})}),Object(f.jsx)("td",{children:s})]},"storagestatus_".concat(t.userId,"_").concat(t.filename)))}))),null!==this.state.connectionTable.addresses){o.addresses=[];var l=this.state.connectionTable.current_address;console.log("first_address: "+l),this.state.connectionTable.addresses.forEach((function(t){if(null===l||void 0===l){l=t;var n=e.state.connectionTable.addresses,s=e.state.connectionTable.status;e.setState({connectionTable:{addresses:n,status:s,current_address:l}})}o.addresses.push(Object(f.jsx)("button",{id:"node_status_address_".concat(t),className:"a_redirector",href:"#",style:{marginTop:"-10%"},onClick:function(){var n=e.state.connectionTable.addresses,s=e.state.connectionTable.status;e.highlightNodeStatus(t,0),e.setState({connectionTable:{addresses:n,status:s,current_address:t}})},children:t}))}))}if(null!==this.state.connectionTable.current_address&&void 0!==this.state.connectionTable.current_address){var d=0,u=0;this.state.log.filter((function(t){return t.node_address===e.state.connectionTable.current_address})).forEach((function(e){"WARNING"===e.message_type&&(d+=1),"ERROR"===e.message_type&&(u+=1)})),o.status=[],o.status.push(Object(f.jsx)("p",{className:"admin_view_title",children:"The status of the internal node"})),o.status.push(Object(f.jsx)("br",{})),o.status.push(Object(f.jsx)("p",{className:"admin_view_title",children:this.state.connectionTable.current_address})),o.status.push(Object(f.jsx)("br",{})),o.status.push(Object(f.jsx)("br",{})),null!==this.state.availableNodes&&this.state.availableNodes.forEach((function(t){t.ip_address===e.state.connectionTable.current_address&&(o.status.push(Object(f.jsxs)("p",{className:"admin_view_title",children:["Location : ",t.location_country]})),o.status.push(Object(f.jsx)("br",{})),o.status.push(Object(f.jsx)("br",{})))})),null!==this.state.connectionTable.status&&this.state.connectionTable.status.forEach((function(t){if(t.ip_address===e.state.connectionTable.current_address){var n=j.getFileSizeUnit(t.used_storage),s=j.getFileSizeUnit(t.total_storage),a=t.used_storage/t.total_storage*100;a=Math.round(1e5*a)/1e5,o.status.push(Object(f.jsxs)("p",{className:"admin_view_title",children:["Used storage",Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),n," / ",s,"\xa0\xa0\xa0 (",a," %)"]})),o.status.push(Object(f.jsx)("br",{})),o.status.push(Object(f.jsx)("br",{})),n=Math.ceil(t.used_storage/1e3);var c=Math.ceil((t.total_storage-n)/1e3);n<.005*c&&(n=.005*c+n),o.status.push(Object(f.jsx)(S.PieChart,{style:{width:"20%",height:"20%"},data:[{title:"Used Storage",value:n,color:"#c84b31"},{title:"Available Storage",value:c,color:"#1eae98"}]}))}})),o.status.push(Object(f.jsx)("br",{})),o.status.push(Object(f.jsx)("br",{})),o.status.push(Object(f.jsxs)("p",{className:"admin_view_title",children:["This node encountered ",d," warnings and ",u," errors."]})),o.status.push(Object(f.jsx)("br",{})),o.status.push(Object(f.jsx)("br",{}))}null!==this.state.replication_status&&void 0!==this.state.replication_status&&(r=[],this.state.replication_status.forEach((function(e){r.push(Object(f.jsx)("p",{className:"admin_view_title",children:e})),r.push(Object(f.jsx)("br",{}))})))}return Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)("div",{className:"Home",children:[Object(f.jsxs)("div",{className:"home_header",children:[Object(f.jsx)("p",{id:"admin_title",children:"Admin console"}),Object(f.jsx)("br",{}),Object(f.jsx)("hr",{style:{width:"90%"}}),Object(f.jsx)("br",{})]}),401===this.state.error_status.code||402===this.state.error_status.code?Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{className:"admin_view_title",style:{fontSize:"100%"},children:this.state.error_status.message}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("button",{style:{marginTop:"-1%",marginBottom:"2%",fontSize:"80%"},onClick:function(){localStorage.setItem("user_data",""),e.redirect("/")},children:"Go to login page"})]}):Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{id:"admin_log_view",className:"admin_div_view",children:[Object(f.jsx)("p",{className:"admin_view_title",children:"Message type"}),Object(f.jsxs)("select",{onChange:function(t){e.fetchLogByCriteriaUpdate("message_type",t.target.value)},children:[Object(f.jsx)("option",{value:"ALL",children:"ALL"}),Object(f.jsx)("option",{value:"SUCCESS",children:"SUCCESS"}),Object(f.jsx)("option",{value:"WARNING",children:"WARNING"}),Object(f.jsx)("option",{value:"ERROR",children:"ERROR"})]}),Object(f.jsx)("p",{className:"admin_view_title",children:"Source node"}),Object(f.jsxs)("select",{onChange:function(t){e.fetchLogByCriteriaUpdate("node_address",t.target.value)},children:[Object(f.jsx)("option",{value:"ALL",children:"ALL"}),s]}),Object(f.jsx)("button",{onClick:function(){return e.fetchLogByCriteriaUpdate(null,null)},children:"\u27f3"}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("button",{style:{marginTop:"-1%",marginBottom:"2%"},onClick:function(){return e.cleanLog()},children:"Clean log with given criteria"}),Object(f.jsx)("br",{}),null===this.state.log?Object(f.jsx)("p",{className:"admin_view_title",children:"Fetching log data..."}):0===this.state.log.length?Object(f.jsx)("p",{className:"admin_view_title",children:"No log register found!"}):Object(f.jsxs)("div",{children:[Object(f.jsxs)("p",{className:"admin_view_title",id:"log_registers_count",children:["Found ",this.state.log.length," log registers."]}),Object(f.jsxs)("table",{children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:"Address"}),Object(f.jsx)("td",{children:"Message type"}),Object(f.jsx)("td",{children:"Message"}),Object(f.jsx)("td",{children:"Timestamp"})]})}),Object(f.jsx)("tbody",{children:a})]})]})]}),Object(f.jsxs)("div",{id:"admin_content_view",className:"admin_div_view",children:[!1===this.state.websocket.connected?Object(f.jsxs)("p",{className:"admin_view_title",children:["Initializing the connection ...",Object(f.jsx)("br",{}),Object(f.jsx)("br",{})]}):Object(f.jsxs)("p",{id:"admin_view_title_0",className:"admin_view_title",children:["Fetching content...",Object(f.jsx)("br",{}),Object(f.jsx)("br",{})]}),Object(f.jsx)("br",{}),null===this.state.content?Object(f.jsx)("p",{}):void 0===this.state.content?0===this.state.error_status.code?Object(f.jsx)("p",{className:"admin_view_title",children:this.state.error_status.message}):Object(f.jsxs)("div",{style:{width:"100%"},children:[Object(f.jsx)("img",{style:{maxHeight:"350px",maxWidth:"350px"},src:"/images/not_found.png"}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("p",{className:"admin_view_title",children:"No register found in the Content Table!"}),Object(f.jsx)("br",{})]}):Object(f.jsxs)("div",{className:"content_div",id:"contentDiv",children:[Object(f.jsxs)("table",{id:"content_table",children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"User ID"}),Object(f.jsx)("th",{children:"Filename"}),Object(f.jsx)("th",{children:"Version No"}),Object(f.jsx)("th",{children:"Hash"}),Object(f.jsx)("th",{children:"Filesize"}),Object(f.jsx)("th",{children:"Replicas"}),Object(f.jsx)("th",{children:"Status"})]})}),Object(f.jsx)("tbody",{children:c})]}),Object(f.jsxs)("div",{id:"content_table_additional_data",children:[Object(f.jsx)("p",{className:"admin_view_title",children:"Content Status Table"}),Object(f.jsx)("br",{}),Object(f.jsx)("p",{id:"admin_view_title_1",className:"admin_view_title",children:"\xa0"}),Object(f.jsx)("br",{}),Object(f.jsx)("hr",{}),Object(f.jsx)("br",{}),Object(f.jsx)("p",{className:"admin_view_title",id:"subject_filename"}),Object(f.jsx)("br",{}),Object(f.jsx)("div",{id:"replication_nodes_div",children:t}),Object(f.jsx)("div",{id:"versions_nodes_div",children:n})]})]})]}),Object(f.jsx)("div",{id:"admin_storagestatus_view",className:"admin_div_view",children:!1===this.state.websocket.connected?Object(f.jsxs)("p",{className:"admin_view_title",children:["Initializing the connection ...",Object(f.jsx)("br",{}),Object(f.jsx)("br",{})]}):null===this.state.storagestatus?Object(f.jsx)("p",{className:"admin_view_title",children:"Fetching internal nodes storage status..."}):void 0===this.state.storagestatus?0===this.state.error_status.code?Object(f.jsx)("p",{className:"admin_view_title",children:this.state.error_status.message}):Object(f.jsxs)("div",{style:{width:"100%"},children:[Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("img",{style:{maxHeight:"350px",maxWidth:"350px"},src:"/images/not_found.png"}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("p",{className:"admin_view_title",children:"No register found in the Storage Status Table!"}),Object(f.jsx)("br",{})]}):Object(f.jsxs)("div",{children:[i.addresses,Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsxs)("div",{className:"content_div",id:"storageDiv",children:[Object(f.jsxs)("table",{id:"content_table",children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"User ID"}),Object(f.jsx)("th",{children:"Filename"}),Object(f.jsx)("th",{children:"Version No"}),Object(f.jsx)("th",{children:"Hash"}),Object(f.jsx)("th",{children:"Another nodes"})]})}),Object(f.jsx)("tbody",{children:i.files})]}),Object(f.jsxs)("div",{id:"content_table_additional_data",children:[Object(f.jsx)("p",{className:"admin_view_title",children:"Storage Status Table"}),Object(f.jsx)("br",{}),Object(f.jsx)("p",{id:"admin_view_title_11",className:"admin_view_title",children:"\xa0"}),Object(f.jsx)("br",{}),Object(f.jsx)("hr",{}),Object(f.jsx)("p",{className:"admin_view_title",id:"subject_filename_1"}),Object(f.jsx)("br",{}),Object(f.jsxs)("div",{id:"storage_additional_data",style:{visibility:"hidden"},children:[Object(f.jsxs)("p",{className:"admin_view_title",children:["Delete this file from this node.",Object(f.jsx)("br",{}),"This will trigger a replication to another node."]}),Object(f.jsx)("br",{}),Object(f.jsx)("button",{className:"redirector",onClick:this.deleteFileFromInternalNode,children:"Delete"}),Object(f.jsxs)("p",{className:"admin_view_title",id:"storagestatus_delete_status",style:{visibility:"hidden"},children:["File successfully deleted from node.",Object(f.jsx)("br",{}),"The change will be visible at the next update from General Manager",Object(f.jsx)("br",{}),"You can also check the Replication Manager to see the workaround."]})]})]})]})]})}),Object(f.jsx)("div",{id:"admin_nodes_view",className:"admin_div_view",children:!1===this.state.websocket.connected?Object(f.jsxs)("p",{className:"admin_view_title",children:["Initializing the connection ...",Object(f.jsx)("br",{}),Object(f.jsx)("br",{})]}):null===this.state.connectionTable.addresses?Object(f.jsx)("p",{className:"admin_view_title",children:"Fetching internal nodes status..."}):void 0===this.state.connectionTable.addresses&&0===this.state.error_status.code?Object(f.jsx)("p",{className:"admin_view_title",children:this.state.error_status.message}):this.state.connectionTable.addresses===[]?Object(f.jsx)("p",{className:"admin_view_title",children:"No internal node found!"}):Object(f.jsxs)("div",{children:[o.addresses,Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("div",{className:"node_status",children:o.status})]})}),Object(f.jsx)("div",{id:"admin_replication_view",className:"admin_div_view",children:!1===this.state.websocket.connected?Object(f.jsxs)("p",{className:"admin_view_title",children:["Initializing the connection ...",Object(f.jsx)("br",{}),Object(f.jsx)("br",{})]}):null===this.state.replication_status?Object(f.jsx)("p",{className:"admin_view_title",children:"Fetching replication manager status..."}):void 0===this.state.replication_status?0===this.state.error_status.code?Object(f.jsx)("p",{className:"admin_view_title",children:this.state.error_status.message}):Object(f.jsxs)("div",{style:{width:"100%"},children:[Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("img",{style:{maxHeight:"350px",maxWidth:"350px"},src:"/images/not_found.png"}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("p",{className:"admin_view_title",children:"No register found in the Replication Manager Table!"}),Object(f.jsx)("br",{})]}):Object(f.jsx)("div",{children:Object(f.jsxs)("div",{className:"node_status",children:[Object(f.jsx)("p",{className:"admin_view_title",children:"Replication Manager Status"}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),r]})})})]})]})})}}]),n}(s.Component)),N=(n(36),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).componentDidMount=function(){j.setHeaderLayout("USER"),s.dragDropStyle("uploader")},s.dragDropStyle=function(e){var t=document.getElementById(e);["dragover","drop"].forEach((function(e){t.addEventListener(e,(function(e){e.preventDefault()}),!1)})),t.addEventListener("dragover",(function(){document.getElementById("dropmessage").innerHTML="Drop your file",t.style.borderStyle="dashed"}),!1),t.addEventListener("dragleave",(function(){document.getElementById("dropmessage").innerHTML="",t.style.borderStyle="solid"}),!1),t.addEventListener("drop",s.handleDropFiles,!1)},s.fetchUserType=function(){return new Promise((function(e){try{s.setState({userType:s.props.location.state.detail.user_type}),e(null)}catch(t){p.getUserRole(s.userData.jwt).then((function(t){1===t.code?(console.log("props fetch: ".concat(t.content)),s.setState({userType:t.content})):401===t.code&&localStorage.setItem("user_data",""),e(null)}))}}))},s.handleDropFiles=function(e){document.getElementById("upload_data").style.display="block",document.getElementById("uploader").style.display="none",document.getElementById("dropmessage").innerHTML="",document.getElementById("uploader").style.borderStyle="solid";var t=e.dataTransfer.files[0];document.getElementById("upload_date_filename").innerHTML=t.name,document.getElementById("upload_date_filesize").innerHTML="Size : ".concat(Math.round(t.size/1024*100)/100," KB"),document.getElementById("upload_date_timedate_last_modified").innerHTML="Last modified : ".concat(j.getCurrentTimestamp(t.lastModifiedDate)),document.getElementById("upload_date_timedate").innerHTML="Upload data : ".concat(j.getCurrentTimestamp(new Date));var n=j.getFileType(t.name);"image"===n?s.setState({preview:Object(f.jsx)("embed",{id:"upload_data_preview",type:"image/jpg",src:URL.createObjectURL(t)})}):"text"===n?s.setState({preview:Object(f.jsx)("iframe",{title:t.name,id:"upload_data_preview",src:URL.createObjectURL(t),alt:"No preview available"})}):s.setState({preview:Object(f.jsx)("p",{id:"upload_data_preview",children:"No preview avaialble!"})}),s.setState({currentFile:t})},s.uploadFile=function(){document.getElementById("dropmessage_1").innerHTML="Uploading file...";var e=!1;setTimeout((function(){!1===e&&(document.getElementById("dropmessage_1").innerHTML="Your file cannot be stored")}),7500),y.uploadFile(s.state.currentFile,s.userData.jwt,s.descriptionData,s.state.userType).then((function(t){1===t.code?(e=!0,document.getElementById("dropmessage_1").innerHTML=t.content,document.getElementById("extra").innerHTML="Your file will be available in a few seconds..."):401===t.code&&(document.getElementById("dropmessage_1").innerHTML=t,console.log("eroare : ".concat(t))),console.log(t)}))},document.getElementById("page-name").innerHTML="Upload Page",s.userData=JSON.parse(localStorage.getItem("user_data")),console.log(s.userData),s.descriptionData=null,s.state={currentFile:null,userType:"STANDARD",preview:Object(f.jsx)("p",{id:"upload_data_preview",children:"No preview available"})},s.fetchUserType().then((function(e){})),s}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)("div",{className:"Home",children:[Object(f.jsx)("div",{className:"upload_header",children:Object(f.jsx)("p",{children:"Upload new file"})}),Object(f.jsx)("hr",{}),Object(f.jsxs)("div",{className:"upload_body",children:[Object(f.jsxs)("div",{className:"upload_div",id:"uploader",children:[Object(f.jsx)("p",{children:"Select a file or drop it here"}),Object(f.jsx)("br",{}),Object(f.jsx)("p",{id:"dropmessage"})]}),Object(f.jsxs)("div",{className:"upload_div",id:"upload_data",children:[Object(f.jsx)("p",{id:"upload_date_filename"}),Object(f.jsx)("br",{}),this.state.preview,Object(f.jsx)("br",{}),Object(f.jsx)("p",{className:"upload_data_details",id:"upload_date_filesize"}),Object(f.jsx)("br",{}),Object(f.jsx)("p",{className:"upload_data_details",id:"upload_date_timedate_last_modified"}),Object(f.jsx)("br",{}),Object(f.jsx)("p",{className:"upload_data_details",id:"upload_date_timedate"}),Object(f.jsx)("br",{}),Object(f.jsx)("input",{type:"text",placeholder:"Upload description",onChange:function(t){e.descriptionData=t.target.value}}),Object(f.jsx)("br",{}),Object(f.jsx)("button",{className:"upload_btn",onClick:this.uploadFile,children:"Upload"}),Object(f.jsx)("br",{}),Object(f.jsx)("button",{className:"a_redirector",id:"selector_storage_status",href:"#",onClick:function(){document.getElementById("upload_data").style.display="none",document.getElementById("uploader").style.display="block"},children:"Upload another file"}),Object(f.jsx)("br",{}),Object(f.jsx)("p",{id:"dropmessage_1"}),Object(f.jsx)("br",{style:{height:"50%"}}),Object(f.jsx)("p",{style:{marginTop:"-5px"},id:"extra"})]})]})]})})}}]),n}(s.Component)),T=n(14),D=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).componentDidMount=function(){j.setHeaderLayout("USER"),s.checkForConnectedUser(),s.fetchUserType().then((function(e){var t=JSON.parse(localStorage.getItem("userfile"));null!==t&&(document.getElementById("p_filename").innerHTML=t.filename,s.fileDetails(t),s.setState({userFile:t}))}))},s.componentDidUpdate=function(){s.state.currentSelectedAction!==n.userActions[4]&&n.userActions.forEach((function(e){e!==n.userActions[4]&&(document.getElementById("selector_".concat(e)).style.borderBottom=e===s.state.currentSelectedAction?"3px solid #23049d":"none")}))},s.fetchUserType=function(){return new Promise((function(e){try{s.setState({userType:s.props.location.state.detail.user_type}),e(null)}catch(t){p.getUserRole(s.userData.jwt).then((function(t){1===t.code?(console.log("props fetch: ".concat(t.content)),s.setState({userType:t.content})):401===t.code&&localStorage.setItem("user_data",""),e(null)}))}}))},s.checkForConnectedUser=function(){s.userData=localStorage.getItem("user_data"),null===s.userData||""===s.userData?s.redirect(""):s.userData=JSON.parse(s.userData)},s.redirect=function(e){""!==e?s.props.history.push(e):s.props.history.push("/")},s.fileDetails=function(e){y.getFileHistory(s.userData.jwt,e.filename).then((function(t){s.setState({fileDetails:t.content,currentFileName:e.filename},(function(){s.downloadFile()}))}))},s.downloadFile=function(){!0===s.fileSuccessfullyDownloaded?(document.getElementById("file_status").innerHTML="Downloading file...",document.getElementById("downloaduri").click(),document.getElementById("file_status").innerHTML="Downloading file...",console.log(s.state.userFile.filesize),setTimeout((function(){document.getElementById("file_status").innerHTML="File successfully downloaded!"}),s.state.userFile.filesize/1e4/2.5)):y.downloadFile(s.userData.jwt,s.state.currentFileName).then((function(e){console.log(e.content),document.getElementById("downloaduri").href=e.content;var t=j.getFileType(s.state.currentFileName);"image"===t?s.setState({filePreview:Object(f.jsx)("embed",{type:"image/jpg",src:e.content})}):"text"===t?s.setState({filePreview:Object(f.jsx)("iframe",{title:s.state.currentFileName,src:e.content,alt:"No preview available"})}):s.setState({filePreview:Object(f.jsx)("p",{children:"No preview avaialble!"})}),s.fileSuccessfullyDownloaded=!0}))},s.deleteFile=function(){document.getElementById("file_status_delete").innerHTML="Deleting file...",document.getElementById("delete_file_button").style.visibility="hidden",y.deleteFile(s.userData.jwt,s.state.currentFileName,s.description).then((function(e){if(1===e.code){var t=3,n=Object(T.a)(s);document.getElementById("file_status_delete").innerHTML="File successfully deleted!";var a=setInterval((function(){document.getElementById("delete_extra").innerHTML="You will be redirected to main page in "+t+"...",-1===(t-=1)&&(clearInterval(a),n.redirect(""))}),1e3);document.getElementById("delete_file_button").onclick=function(){return s.redirect("")}}else document.getElementById("file_status_delete").innerHTML=e.content}))},s.fileDetailsAfterRename=function(e){y.getFileHistory(s.userData.jwt,e).then((function(t){if(0===t.code){var n=Object(T.a)(s);setTimeout((function(){n.fileDetailsAfterRename(e)}),500)}else s.fileSuccessfullyDownloaded=!1,s.setState({fileDetails:t.content,currentFileName:e},(function(){s.downloadFile()}))}))},s.renameFile=function(){null===s.newname||""===s.newname?document.getElementById("file_status_rename_1").innerHTML="Please provide a valid filename!":j.getFileExtension(s.newname)!==j.getFileExtension(s.state.currentFileName)?document.getElementById("file_status_rename_1").innerHTML="You are trying to change the file type ? <br/> This is now allowed":null===s.description||""===s.description?document.getElementById("file_status_rename_1").innerHTML="Please provide a valid description!":y.renameFile(s.userData.jwt,s.state.currentFileName,s.newname,s.description).then((function(e){if(1===e.code){document.getElementById("file_status_rename_1").innerHTML="File successfully renamed.",document.getElementById("p_filename").innerHTML=s.newname;var t=s.state.userFile;t.filename=s.newname,localStorage.setItem("userfile",JSON.stringify(t)),s.state.currentFileName=s.newname,s.setState({userFile:t},(function(){s.fileDetailsAfterRename(s.newname)}))}else document.getElementById("file_status_rename_1").innerHTML=e.content}))},s.updateAction=function(e){document.getElementById("download_action").style.display="none",document.getElementById("delete_action").style.display="none",document.getElementById("rename_action").style.display="none",document.getElementById("update_action").style.display="none",document.getElementById("".concat(n.userActions[e],"_action")).style.display="block",s.setState({currentSelectedAction:n.userActions[e]})},document.getElementById("page-name").innerHTML="Home Page",s.userData=localStorage.getItem("user_data"),s.description=null,s.newname=null,s.fileSuccessfullyDownloaded=!1,s.filesize=null,s.state={isUserConnected:!1,userType:null,accountAvailable:!0,accountSuccessfullyCreated:!1,currentFileName:null,availableNodes:null,fileDetails:null,userFile:null,filePreview:Object(f.jsx)("p",{children:"No preview avaialble!"}),currentSelectedAction:n.userActions[4]},s}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=[];return null!==this.state.userType&&null!==this.state.fileDetails&&this.state.fileDetails.forEach((function(e){console.log(e),t.push(Object(f.jsxs)("div",{className:"details_history",children:[Object(f.jsxs)("label",{children:[e.version_no," : ",e.version_hash.toString(16),"\xa0\xa0\xa0\xa0\xa0",e.version_desc]}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("label",{children:e.version_timestamp}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{})]})),t.push(Object(f.jsx)("br",{}))})),Object(f.jsx)("div",{className:"App",children:Object(f.jsx)("div",{className:"Home",children:Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{className:"home_header",id:"home_header_details",children:Object(f.jsx)("p",{id:"p_filename",style:{width:"100%",textAlign:"center"}})}),Object(f.jsx)("hr",{id:"mainpage_hr"}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsxs)("div",{className:"home_body_main_div",children:[Object(f.jsx)("div",{id:"file_versions",children:null!==this.state.userFile?Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{children:"Details"}),Object(f.jsx)("hr",{style:{width:"50%",marginBottom:"10%"}}),Object(f.jsxs)("div",{children:[Object(f.jsxs)("label",{children:["Hash : ",this.state.userFile.hash.toString(16)]}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsxs)("label",{children:["Size : ",j.getFileSizeUnit(this.state.userFile.filesize)]}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsxs)("label",{children:["Version : ",this.state.userFile.version]}),Object(f.jsx)("br",{})]}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("p",{children:"History"}),Object(f.jsx)("hr",{style:{width:"50%",marginBottom:"10%"}}),t]}):Object(f.jsx)("p",{})}),Object(f.jsx)("div",{id:"previews",children:this.state.filePreview}),Object(f.jsxs)("div",{id:"file_details",children:[Object(f.jsx)("p",{children:"Actions"}),Object(f.jsx)("hr",{}),Object(f.jsx)("button",{className:"a_redirector",id:"selector_download",style:{fontSize:"90%"},onClick:function(){e.updateAction(0),e.downloadFile()},children:"Download"}),Object(f.jsx)("button",{className:"a_redirector",id:"selector_delete",style:{fontSize:"90%"},onClick:function(){return e.updateAction(1)},children:"Delete"}),Object(f.jsx)("button",{className:"a_redirector",id:"selector_rename",style:{fontSize:"90%"},onClick:function(){return e.updateAction(2)},children:"Rename"}),Object(f.jsx)("button",{className:"a_redirector",id:"selector_update",style:{fontSize:"90%"},onClick:function(){return e.updateAction(3)},children:"Update"}),Object(f.jsx)("a",{id:"downloaduri",href:"/",download:!0,children:"\xa0"}),Object(f.jsx)("br",{}),Object(f.jsx)("div",{className:"action_div",id:"download_action",children:Object(f.jsx)("p",{id:"file_status"})}),Object(f.jsxs)("div",{className:"action_div",id:"delete_action",children:[Object(f.jsxs)("p",{id:"file_status_delete",children:["The erasing procedure is irreversible.",Object(f.jsx)("br",{}),"Your files will be deleted permanently.",Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),"Do you want to proceed ?"]}),Object(f.jsx)("br",{}),Object(f.jsx)("p",{id:"delete_extra"}),Object(f.jsx)("br",{}),Object(f.jsx)("button",{id:"delete_file_button",style:{fontSize:"80%",padding:0,paddingLeft:"5px",paddingRight:"5px",height:"40px"},onClick:function(){return e.deleteFile()},children:"Delete my file"})]}),Object(f.jsxs)("div",{className:"action_div",id:"rename_action",children:[Object(f.jsxs)("p",{id:"file_status_rename",children:["Please provide the new file name",Object(f.jsx)("br",{})]}),Object(f.jsx)("input",{onChange:function(t){e.newname=t.target.value},type:"text"}),Object(f.jsx)("br",{}),Object(f.jsxs)("p",{id:"file_status_rename",children:["Please also provide a description for your update",Object(f.jsx)("br",{})]}),Object(f.jsx)("input",{onChange:function(t){e.description=t.target.value},type:"text"}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("button",{id:"rename_file_button",style:{fontSize:"80%",padding:0,paddingLeft:"5px",paddingRight:"5px",height:"40px"},onClick:function(){return e.renameFile()},children:"Rename my file"}),Object(f.jsx)("p",{id:"file_status_rename_1",children:Object(f.jsx)("br",{})}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{})]}),Object(f.jsxs)("div",{className:"action_div",id:"update_action",children:[Object(f.jsxs)("p",{id:"file_status_update",children:["Direct update of file is not supported yet",Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),"Please update your file locally and upload it",Object(f.jsx)("br",{}),"Consider keeping the same name for file",Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),"The new version will be registered",Object(f.jsx)("br",{}),Object(f.jsx)("br",{})]}),Object(f.jsx)("button",{id:"rename_file_button",style:{fontSize:"80%",padding:0,paddingLeft:"5px",paddingRight:"5px",height:"40px"},onClick:function(){return e.redirect("/upload")},children:"Go to upload page"})]}),Object(f.jsxs)("div",{className:"request_description",children:[Object(f.jsx)("p",{id:"input_label",children:"New name : "}),Object(f.jsx)("input",{onChange:function(t){e.newname=t.target.value},type:"text"})]}),Object(f.jsx)("div",{className:"request_description",children:Object(f.jsx)("button",{className:"file_button",id:"proceed_btn",onClick:function(){return e.renameFile(1)},children:"Rename"})}),Object(f.jsx)("br",{}),Object(f.jsx)("p",{id:"file_status"})]})]})]})})})}}]),n}(s.Component);D.userActions=["download","delete","rename","update","no-selected"];var I=D;n(37);c.a.render(Object(f.jsxs)(i.a,{children:[Object(f.jsx)(o.a,{exact:!0,path:"/",component:_}),Object(f.jsx)(o.a,{exact:!0,path:"/profile",component:O}),Object(f.jsx)(o.a,{exact:!0,path:"/uhome",component:v}),Object(f.jsx)(o.a,{exact:!0,path:"/ahome",component:E}),Object(f.jsx)(o.a,{exact:!0,path:"/upload",component:N}),Object(f.jsx)(o.a,{exact:!0,path:"/details",component:I})]}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.a01e7d4f.chunk.js.map