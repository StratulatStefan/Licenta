{"version":3,"sources":["services/GeneralPurposeService.js","environment.js","services/HTTPResponseHandler.js","services/UsersHandlerService.js","pages/StartPage.js","pages/ProfilePage.js","services/FileHandlerService.js","pages/MainUserPage.js","services/AdminHandlerService.js","pages/AdminMainPage.js","pages/UploadPage.js","pages/FileDetailsPage.js","index.js"],"names":["GeneralPurposeService","getFileSizeUnit","filesize","index","Math","round","getCurrentTimestamp","currentdate","day","getDate","month","getMonth","year","getFullYear","hours","getHours","minutes","getMinutes","getCurrentTimestampForLogging","limit","Date","time","split","includes","parseInt","getFileExtension","filename","tokens","length","getFileType","extension","setHeaderLayout","usertype","adminItems","userItems","concat","forEach","redirector","document","getElementById","style","display","prepareURLQuery","logCriteria","options","node_address","push","message_type","join","sanitizeURL","content","replace","Environment","rest_api","frontend_proxy","available_logos","getWebSocket","Promise","resolve","webSocketConnection","Client","brokerURL","reconnectDelay","heartbeatIncoming","heartbeatOutgoing","onConnect","console","log","onDisconnect","activate","HTTPResponseHandler","handleErrorStatus","response","response_status","status","status_code","json","then","alert","UsersHandlerService","basicCredentialsCheck","credentials","forbiddens","Exception","Object","keys","credential_key","character","e","getAdditionalUserData","jwt","fetch","method","mode","headers","ok","code","message","getUserRole","getAvailableUserTypes","login","credentialsCheckStatus","userdata","body","JSON","stringify","register","updateUserTypeInternally","new_type","updatePlan","newplan","StartPage","props","componentDidMount","fetchAvailableUserTypes","checkForConnectedUser","fetchUserType","componentDidUpdate","state","accountAvailable","accountSuccessfullyCreated","innerHTML","setState","isUserConnected","userType","redirect","userData","localStorage","getItem","parse","visibility","availableUserTypes","setItem","accountCredentials","color","createAccount","destination","history","email","password","userypesoptions","value","className","id","src","alt","this","onChange","event","target","type","onClick","name","country","Component","ProfilePage","userDetailsCategories","category","borderBottom","userDetailsCategory","additionalUserData","fetchAdditionalUserData","utype","userDetails","generalData","total_storage","available_storage","used_storage","businessPlans","href","FileHandlerService","uploadFile","file","description","url","additional_user_data","formData","FormData","append","storage_quantity","getUserFiles","getFileHistory","deleteFile","renameFile","newname","downloadFile","MainUserPage","_","fetchUserFiles","location","detail","userFiles","param","currentFileName","availableNodes","fileDetails","userFile","logosrc","fontSize","textDecoration","version","version_description","hash","toString","width","AdminHandlerService","fetchLog","fetchAvailableNodesFromAPI","cleanLog","fetchNodesStoringFile","userId","fetchNodeData","nodeAddress","getFileVersions","userid","deleteFileFromInternalNode","user","address","AdminMainPage","usertype_result","undefined","fetchAvailableNodes","error_status","adminAction","websocket","menu_selection","handleContentTable","fetchFileVersions","file_versions","handleReplicationManagerStatus","replication_status","handleConnectionTable","nodes_details","connectionTable","current_address","handleNodesActivity","addresses","highlightNodeStatus","selectedAddress","label","addressList","identificator","storagestatus","handleStorageStatus","storage_status","first_address","nodesAddresses","node_registers","actionName","view","connected","subscriptions","unsubscribe","current_topic","handleFunction","fetchLogByCriteriaUpdate","topic","func","subscribe","msg","criteria","updatevalue","fetchReplicationNodesForFile","content_nodes_data","content_nodes","selectedFile","date1","onclick","replicationNodesForFile","versionForFile","availableNodesSelect","logData","storagestatus_nodes","files","additional_data","nodes_status","node","log_register","register_date","registerId","content_register","versionNo","onMouseOver","onMouseLeave","crc","fileSize","replication_factor","version_no","version_desc","version_hash","ip_address","location_country","marginTop","indexOfAddress","indexOf","another_nodes","nodesVersions","nodesCRCs","warnings","errors","filter","percent","ceil","height","data","title","marginBottom","maxHeight","maxWidth","UploadPage","dragDropStyle","div_name","dropArea","addEventListener","preventDefault","borderStyle","handleDropFiles","dataTransfer","size","lastModifiedDate","fileType","preview","URL","createObjectURL","currentFile","file_send","setTimeout","descriptionData","placeholder","FileDetailsPage","currentSelectedAction","userActions","action","fileSuccessfullyDownloaded","click","filePreview","global_count","handler","interval","setInterval","clearInterval","fileDetailsAfterRename","newFileName","updateAction","actionIndex","version_timestamp","textAlign","download","padding","paddingLeft","paddingRight","ReactDOM","render","exact","path","component"],"mappings":"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","file":"static/js/main.a01e7d4f.chunk.js","sourcesContent":["export class GeneralPurposeService{\r\n    static getFileSizeUnit = (filesize) => {\r\n        let units = ['', 'K', 'M', 'G']\r\n        let index = 0;\r\n        while(true){\r\n            if(filesize / 1024 >= 1){\r\n                filesize = filesize / 1024;\r\n                index = index + 1;\r\n            }\r\n            else{\r\n                break\r\n            }\r\n        }\r\n        return Math.round(filesize * 10000) / 10000 + \" \" + units[index] + \"B\"\r\n    }\r\n\r\n    static getCurrentTimestamp = (currentdate) => {\r\n        let day     = currentdate.getDate()\r\n        let month   = currentdate.getMonth()\r\n        let year    = currentdate.getFullYear()\r\n        let hours   = currentdate.getHours()\r\n        let minutes = currentdate.getMinutes()\r\n        return (day < 10 ? \"0\" + day : day) + \"/\"\r\n            + (month < 10 ? \"0\" + (month + 1) : (month + 1))  + \"/\" \r\n            + year + \" \"  \r\n            + (hours < 10 ? \"0\" + hours : hours) + \":\"  \r\n            + (minutes < 10 ? \"0\" + minutes : minutes)\r\n    }\r\n\r\n    static getCurrentTimestampForLogging = (limit) => {\r\n        let currentdate = new Date()\r\n        let year = currentdate.getFullYear()\r\n        let month = currentdate.getMonth() + 1\r\n        let day = currentdate.getDate()\r\n        let hours = currentdate.getHours()\r\n        let minutes = currentdate.getMinutes()\r\n        let time = limit.split(\" \")\r\n        if(time[1].includes(\"minute\")){\r\n            minutes -= parseInt(time[0])\r\n        }\r\n        else if(time[1].includes(\"hour\")){\r\n            hours -= parseInt(time[0])\r\n        }\r\n        else if(time[1].includes(\"day\")){\r\n            day -= parseInt(time[0])\r\n        }\r\n        else if(time[1].includes(\"week\")){\r\n            day -= parseInt(time[0]) * 7\r\n        }\r\n        else if(time[1].includes(\"month\")){\r\n            month -= parseInt(time[0])\r\n        }\r\n        else if(time[1].includes(\"year\")){\r\n            year -= parseInt(time[0])\r\n        }\r\n\r\n        return  `${year}-${month}-${day}%20${hours}:${minutes}`\r\n    }\r\n\r\n    static getFileExtension = (filename) => {\r\n        let tokens = filename.split(\".\")\r\n        return tokens[tokens.length - 1];\r\n    }\r\n\r\n    static getFileType = (filename) => {\r\n        let extension = GeneralPurposeService.getFileExtension(filename)\r\n        let img = [\"jpg\", \"jpeg\", \"png\", \"ico\", \"gif\"]\r\n        let exe = [\"msi\", \"exe\"]\r\n        if(img.includes(extension)){\r\n            return \"image\"\r\n        }\r\n        if(exe.includes(extension)){\r\n            return \"exe\"\r\n        }\r\n        return \"text\"\r\n    }\r\n\r\n    static setHeaderLayout = (usertype) => {\r\n        let adminItems = [\r\n            \"log_redirector\", \"content-table_redirector\", \r\n            \"storage-table_redirector\", \"nodes-status_redirector\", \r\n            \"replication-status_redirector\"\r\n        ]\r\n        let userItems = [\"upload_redirector\", \"home_redirector\", \"profile_data\"]\r\n        adminItems.concat(userItems).forEach(redirector => {\r\n            document.getElementById(redirector).style.display = \"none\"\r\n        })\r\n        if(usertype === \"START\"){\r\n            return;\r\n        }\r\n        if(usertype === \"ADMIN\"){\r\n            adminItems.forEach(redirector => {\r\n                document.getElementById(redirector).style.display = \"block\"\r\n            })\r\n        }\r\n        else{\r\n            userItems.forEach(redirector => {\r\n                document.getElementById(redirector).style.display = \"block\"\r\n            })\r\n        }\r\n    }\r\n\r\n    static prepareURLQuery = (logCriteria) => {\r\n        let options = []\r\n        if(logCriteria.node_address !== null && logCriteria.node_address !== \"ALL\"){\r\n            options.push(`node_address=${logCriteria.node_address}`)\r\n        }\r\n        if(logCriteria.message_type !== null && logCriteria.message_type !== \"ALL\"){\r\n            options.push(`message_type=${logCriteria.message_type}`)\r\n        }\r\n        if(options.length > 0){\r\n            return \"?\" + options.join(\"&\")\r\n        }\r\n        return \"\"\r\n    }\r\n\r\n    static sanitizeURL = (content) => {\r\n        return content.replace(\".\", \"%2E\").replace(\"_\", \"%5F\");\r\n    }\r\n}\r\n","import { Client } from '@stomp/stompjs';\r\n\r\n\r\nexport class Environment{\r\n    static rest_api        = \"http://localhost:8085/api\"\r\n    static frontend_proxy  = \"http://127.0.0.100:8090/proxy\"\r\n    static available_logos = [\"c#\", \"c\", \"cpp\", \"css\", \"html\", \"java\", \"jpg\", \"js\", \"json\",\"pdf\", \"png\", \"py\",\"svg\",\"txt\",\"xml\"]\r\n\r\n    static getWebSocket = () => {\r\n        return new Promise(resolve => {\r\n            let webSocketConnection = new Client({\r\n                brokerURL: \"ws://127.0.0.100:8090/wbsocket\",\r\n                reconnectDelay: 10,\r\n                heartbeatIncoming: 3000,\r\n                heartbeatOutgoing: 3000,\r\n                onConnect: () => {\r\n                    console.log(\"Websocket connected!\")\r\n                    resolve(webSocketConnection)\r\n                },\r\n                onDisconnect: () => {\r\n                    console.log(\"Websocket disconnected.\")\r\n                }\r\n            });\r\n            webSocketConnection.activate()\r\n        })\r\n    }\r\n}","export class HTTPResponseHandler{\r\n    static handleErrorStatus = (response) => {\r\n        return new Promise((resolve) => {\r\n            let response_status = response.status\r\n            let status_code = 0\r\n            response.json().then(response => {\r\n                if(response_status === 401){\r\n                    status_code = 401\r\n                    if(response[\"error status\"] !== null && response[\"error status\"].includes(\"expired\")){\r\n                        response['error status'] = \"You session expired. Please try to reauthenticate.\"\r\n                        alert(\"Sesiunea a expirat! Incercati sa va reautentificati!\")\r\n                        status_code = 402\r\n                    }\r\n                    else{\r\n                        response['error status'] = \"Internal error. We are sorry.\"\r\n                    }\r\n                }\r\n                resolve({\r\n                    \"code\" : status_code,\r\n                    \"message\": response['error status']\r\n                })\r\n            })\r\n        })\r\n    }\r\n}","import {Environment} from '../environment';\r\nimport {HTTPResponseHandler} from '../services/HTTPResponseHandler';\r\n\r\nexport class UsersHandlerService{\r\n    /* ================= ADDITIONAL VALIDATION FUNCTIONS ================= */\r\n    static basicCredentialsCheck = (credentials) => {\r\n        let status = [true, null]\r\n        const forbiddens = [\"\\\"\", \" \", \"/\", \";\", \":\"]\r\n        const Exception = {}\r\n        // verificam sa nu avem campuri goale sau caractere interzise\r\n        try{\r\n            Object.keys(credentials).forEach(credential_key => {\r\n                if(credentials[credential_key] === \"\"){\r\n                    status = [false, `Nu ati introdus ${credential_key}`]\r\n                    throw Exception\r\n                }\r\n                \r\n                forbiddens.forEach(character => {\r\n                    if(character === \" \" && credential_key === \"name\"){\r\n                        return;\r\n                    }\r\n                    if(credentials[credential_key].includes(character)){\r\n                        status = [false, `${credential_key} contine caractere interzise! (${character})`]\r\n                        throw Exception\r\n                    }\r\n                })\r\n\r\n            })\r\n        }\r\n        catch(e){\r\n            return status\r\n        }\r\n\r\n        // verificam ca email-ul sa aiba formatul necesar\r\n        if(!credentials[\"email\"].includes(\"@\") || !credentials[\"email\"].includes(\".\")){\r\n            return [false, \"Username-ul nu respecta formatul unui email.\"];\r\n        }\r\n\r\n        return status\r\n    }\r\n\r\n\r\n    /* ================= RETRIEVE ================= */\r\n    static getAdditionalUserData = (jwt) => {\r\n        return new Promise((resolve) => {\r\n            fetch(`${Environment.rest_api}/user/search`, {\r\n                method : 'GET',\r\n                mode : \"cors\",\r\n                headers : {\r\n                    'Authorization' : `Bearer ${jwt}`,\r\n                },\r\n            }).then(response => {\r\n                if(response.ok){\r\n                    response.json().then(response => {\r\n                        resolve({\r\n                            \"code\" : 1,\r\n                            \"content\" : response\r\n                        })\r\n                    });\r\n                }\r\n                else{\r\n                    HTTPResponseHandler.handleErrorStatus(response).then(status => {\r\n                        resolve({\r\n                            \"code\" : status.code,\r\n                            \"content\" : status.message\r\n                        })\r\n                    });\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n    static getUserRole = (jwt) => {\r\n        return new Promise((resolve) => {\r\n            fetch(`${Environment.rest_api}/user/role`, {\r\n                method : 'GET',\r\n                mode : \"cors\",\r\n                headers : {\r\n                    'Authorization' : `Bearer ${jwt}`,\r\n                },\r\n            }).then(response => {\r\n                if(response.ok){\r\n                    response.json().then(response => {\r\n                        resolve({\r\n                            \"code\" : 1,\r\n                            \"content\" : response[\"role\"]\r\n                        })\r\n                    });\r\n                }\r\n                else{\r\n                    HTTPResponseHandler.handleErrorStatus(response).then(status => {\r\n                        resolve({\r\n                            \"code\" : status.code,\r\n                            \"content\" : status.message\r\n                        })\r\n                    });\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n    static getAvailableUserTypes = () => {\r\n        return new Promise((resolve) => {\r\n            fetch(`${Environment.rest_api}/usertype/all`, {\r\n                method : 'GET',\r\n                mode : \"cors\",\r\n            }).then(response => {\r\n                if(response.ok){\r\n                    response.json().then(response => {\r\n                        resolve({\r\n                            \"code\" : 1,\r\n                            \"content\" : response\r\n                        })\r\n                    });\r\n                }\r\n                else{\r\n                    HTTPResponseHandler.handleErrorStatus(response).then(status => {\r\n                        resolve({\r\n                            \"code\" : status.code,\r\n                            \"content\" : status.message\r\n                        })\r\n                    });\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n\r\n    /* ================= CREATE ================= */\r\n    static login = (credentials) => {\r\n        return new Promise((resolve) => {\r\n            let credentialsCheckStatus = this.basicCredentialsCheck(credentials)\r\n            if(credentialsCheckStatus[0] === true){\r\n                let userdata = {\r\n                    \"username\" : credentials[\"email\"],\r\n                    \"password\" : credentials[\"password\"]\r\n                }\r\n                fetch(`${Environment.rest_api}/user/login`, {\r\n                    method : 'POST',\r\n                    mode : 'cors',\r\n                    headers : {\r\n                        'Content-Type' : 'application/json'\r\n                    },\r\n                    body : JSON.stringify(userdata)\r\n                }).then(response => {\r\n                    if(response.ok){\r\n                        response.json().then(response => {\r\n                            resolve({\r\n                                \"code\" : 1,\r\n                                \"content\" : response\r\n                            })\r\n                        });\r\n                    }\r\n                    else{\r\n                        HTTPResponseHandler.handleErrorStatus(response).then(status => {\r\n                            resolve({\r\n                                \"code\" : status.code,\r\n                                \"content\" : status.message\r\n                            })\r\n                        });\r\n                    }\r\n                })\r\n            }\r\n            else{\r\n                resolve({\r\n                    \"code\" : 0,\r\n                    \"content\" : credentialsCheckStatus[1]\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    static register = (credentials) => {\r\n        return new Promise((resolve) => {\r\n            let credentialsCheckStatus = this.basicCredentialsCheck(credentials)\r\n            if(credentialsCheckStatus[0] === true){\r\n                fetch(`${Environment.rest_api}/user`, {\r\n                    method : 'POST',\r\n                    mode : 'cors',\r\n                    headers : {\r\n                        'Content-Type' : 'application/json'\r\n                    },\r\n                    body : JSON.stringify(credentials)\r\n                }).then(response => {\r\n                    if(response.ok){\r\n                        response.json().then(response => {\r\n                            resolve({\r\n                                \"code\" : 1,\r\n                                \"content\" : response\r\n                            })\r\n                        });\r\n                    }\r\n                    else{\r\n                        HTTPResponseHandler.handleErrorStatus(response).then(status => {\r\n                            resolve({\r\n                                \"code\" : status.code,\r\n                                \"content\" : status.message\r\n                            })\r\n                        });\r\n                    }\r\n                })\r\n            }\r\n            else{\r\n                resolve({\r\n                    \"code\" : 0,\r\n                    \"content\" : credentialsCheckStatus[1]\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    /* ================= UPDATE ================= */\r\n    static updateUserTypeInternally = (jwt, new_type) => {\r\n        return new Promise((resolve) => {\r\n            fetch(`${Environment.frontend_proxy}/user_type`, {\r\n                method : 'PUT',\r\n                mode : 'cors',\r\n                headers : {\r\n                    'Content-Type'  : 'application/json',\r\n                    'Authorization' : `Bearer ${jwt}`\r\n                },\r\n                body : JSON.stringify({\"user_type\" : new_type})\r\n            }).then(response => {\r\n                if(response.ok){\r\n                    response.json().then(response => {\r\n                        resolve({\r\n                            \"code\" : 1,\r\n                            \"content\" : response\r\n                        })\r\n                    });\r\n                }\r\n                else{\r\n                    HTTPResponseHandler.handleErrorStatus(response).then(status => {\r\n                        resolve({\r\n                            \"code\" : status.code,\r\n                            \"content\" : status.message\r\n                        })\r\n                    });\r\n                }\r\n            })\r\n        })\r\n\r\n    }\r\n\r\n    static updatePlan = (jwt, newplan) => {\r\n        return new Promise((resolve) => {\r\n            fetch(`${Environment.rest_api}/user`, {\r\n                method : 'PUT',\r\n                mode : 'cors',\r\n                headers : {\r\n                    'Content-Type'  : 'application/json',\r\n                    'Authorization' : `Bearer ${jwt}`\r\n                },\r\n                body : JSON.stringify({\"type\" : newplan})\r\n            }).then(response => {\r\n                if(response.ok){\r\n                    response.json().then(response => {\r\n                        resolve({\r\n                            \"code\" : 1,\r\n                            \"content\" : response\r\n                        })\r\n                    });\r\n                }\r\n                else{\r\n                    HTTPResponseHandler.handleErrorStatus(response).then(status => {\r\n                        resolve({\r\n                            \"code\" : status.code,\r\n                            \"content\" : status.message\r\n                        })\r\n                    });\r\n                }\r\n            })\r\n        })\r\n    }\r\n}","import React, { Component }      from 'react';\r\nimport { GeneralPurposeService } from '../services/GeneralPurposeService';\r\nimport {UsersHandlerService}     from '../services/UsersHandlerService';\r\n\r\nimport '../styles/pages-style.css';\r\n\r\nclass StartPage extends Component {\r\n    static availableUserTypes = null\r\n\r\n    constructor(props){\r\n        super(props)\r\n        document.getElementById(\"page-name\").innerHTML = \"Login Page\";\r\n        this.userData = localStorage.getItem('user_data')\r\n        this.accountCredentials = {email : \"\", password : \"\"}\r\n        this.state = {\r\n            isUserConnected            : false,\r\n            userType                   : \"\",\r\n            accountAvailable           : true,\r\n            accountSuccessfullyCreated : false\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        GeneralPurposeService.setHeaderLayout(\"START\")\r\n        this.fetchAvailableUserTypes()\r\n        this.checkForConnectedUser()\r\n        this.fetchUserType()\r\n    }\r\n\r\n    componentDidUpdate = () => {\r\n        if(this.state.accountAvailable === true && this.state.accountSuccessfullyCreated === true){\r\n            document.getElementById(\"status_message\").innerHTML = \"\"\r\n            this.setState({accountSuccessfullyCreated : false})\r\n        }\r\n        if(this.state.isUserConnected === true && this.state.userType !== \"\"){\r\n            this.redirect(this.state.userType === \"ADMIN\" ? \"/ahome\" : \"/uhome\")\r\n        }\r\n    }\r\n\r\n    checkForConnectedUser = () => {\r\n        this.userData = localStorage.getItem('user_data')\r\n        var status = (this.userData !== null && this.userData !== '')\r\n        this.setState({isUserConnected : status});\r\n        if(status === true){\r\n            this.userData = JSON.parse(this.userData)\r\n            document.getElementById(\"log_data_uname\").innerHTML = this.userData[\"name\"];\r\n            document.getElementById(\"log_data_profile\").style.visibility = \"visible\";\r\n        }\r\n        else{\r\n            document.getElementById(\"log_data_uname\").innerHTML = \"\";\r\n            document.getElementById(\"log_data_profile\").style.visibility = \"hidden\";\r\n        }\r\n    }\r\n\r\n    fetchAvailableUserTypes = () => {\r\n        UsersHandlerService.getAvailableUserTypes().then(response => {\r\n            if(response.code === 1){\r\n                StartPage.availableUserTypes = response.content\r\n            }\r\n            else{\r\n            }\r\n        })\r\n    }\r\n\r\n    fetchUserType = () => {\r\n        if(this.userData !== null && this.userData !== ''){\r\n            UsersHandlerService.getUserRole(this.userData[\"jwt\"]).then(response => {\r\n                if(response.code === 1){\r\n                    this.setState({userType : response[\"content\"]})\r\n                }\r\n                else if(response.code === 401){\r\n                    localStorage.setItem(\"user_data\", '')\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    login = () => {\r\n        //this.accountCredentials = {\"email\" : \"stefanc.stratulat@gmail.com\", \"password\" : \"parola.dropbox123\"}\r\n        //this.accountCredentials = {\"email\" : \"dropbox.com@dpbox.com\", \"password\" : \"82467913\"}\r\n        UsersHandlerService.login(this.accountCredentials).then(response => {\r\n            if(response.code === 1){\r\n                localStorage.setItem(\"user_data\", JSON.stringify(response.content))\r\n                this.checkForConnectedUser()\r\n                this.fetchUserType()\r\n                document.getElementById(\"logoutButton\").style.visibility = \"visible\"\r\n            }\r\n            else{\r\n                document.getElementById(\"status_message\").style.display = \"block\"\r\n                document.getElementById(\"status_message\").style.color   = \"#810000\";\r\n                document.getElementById(\"status_message\").innerHTML     = response.content\r\n            }\r\n        })\r\n    }\r\n\r\n    createAccount = () => {\r\n        UsersHandlerService.register(this.accountCredentials).then(response => {\r\n            document.getElementById(\"status_message\").style.display = \"block\"\r\n            if(response.code === 1){\r\n                document.getElementById(\"status_message\").innerHTML   = response.content[\"success status\"]\r\n                document.getElementById(\"status_message\").style.color = \"#206a5d\";\r\n                this.setState({accountSuccessfullyCreated : true})\r\n            }\r\n            else{\r\n                document.getElementById(\"status_message\").style.color = \"#810000\";\r\n                document.getElementById(\"status_message\").innerHTML   = response.content\r\n            }\r\n        })\r\n    }\r\n\r\n    redirect = (destination) => {\r\n        if(destination !== \"\"){\r\n            this.props.history.push({\r\n                \"pathname\" : destination,\r\n                \"state\" : {\"detail\" : {\"user_type\" : this.state.userType}}\r\n            })\r\n        }\r\n        else{\r\n            this.props.history.push(\"/\")\r\n        }\r\n    }\r\n\r\n    render() {\r\n        let userypesoptions = []\r\n        if(StartPage.availableUserTypes !== null){\r\n            StartPage.availableUserTypes.forEach(usertype => {\r\n                userypesoptions.push(\r\n                    <option key={`option_${usertype[\"user_type\"]}`} value={usertype[\"user_type\"]}>{usertype[\"user_type\"]}</option>\r\n                )\r\n            })\r\n        }\r\n\r\n\r\n      return (\r\n        <div className=\"App\">\r\n            <div className=\"title\">\r\n                <img id=\"title_logo\" src=\"images/logo.png\" alt=\"Logo not found\"/>\r\n                <label id=\"title_text\">Safestorage</label>\r\n            </div>\r\n            <hr/>\r\n            {this.state.isUserConnected === false ?\r\n                <div id=\"homediv\">\r\n                    <div id=\"homediv_left\">\r\n                        <div id=\"homediv_imgdiv\">\r\n                            <img id=\"homediv_img\" src=\"/images/mainpage_img.png\" alt=\"\"/>\r\n                        </div>\r\n                        <div id=\"homediv_descdiv\">\r\n                            <p>\r\n                                File storage and versioning\r\n                                <br/>\r\n                                <br/>\r\n                                The ultimate app for storing and versioning your files in the safest way\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                    <div id=\"homediv_right\">\r\n                        {this.state.accountAvailable === true ? \r\n                        <div>\r\n                            <p className=\"login_header\">Log into your account</p>\r\n                            <p>Email</p>\r\n                            <input \r\n                                onChange={(event) => {this.accountCredentials[\"email\"] = event.target.value}} \r\n                                type=\"email\"/>\r\n                            <p>Password</p>\r\n                            <input \r\n                                onChange={(event) => {this.accountCredentials[\"password\"] = event.target.value}} \r\n                                type=\"password\"/>\r\n                            <p><button className=\"redirector\" onClick={this.login}>Autentificare</button></p>\r\n                        </div> : \r\n                        <div>\r\n                            <p className=\"login_header\">Create account</p>\r\n                            <p>Name</p>\r\n                            <input \r\n                                onChange={(event) => {this.accountCredentials[\"name\"] = event.target.value}} \r\n                                type=\"text\" />\r\n                            <p>Email</p>\r\n                            <input \r\n                                onChange={(event) => {this.accountCredentials[\"email\"] = event.target.value}} \r\n                                type=\"email\" />\r\n                            <p>Password</p>\r\n                            <input \r\n                                onChange={(event) => {this.accountCredentials[\"password\"] = event.target.value}} \r\n                                type=\"password\" />\r\n                            <p>User type</p>\r\n                            <select onChange={(event) => {this.accountCredentials[\"type\"] = event.target.value}}>\r\n                                {userypesoptions}\r\n                            </select>\r\n                            <p>Country</p>\r\n                            <input \r\n                                onChange={(event) => {this.accountCredentials[\"country\"] = event.target.value}} \r\n                                type=\"text\" />\r\n                            <br/>\r\n                            <label><button className=\"redirector\" onClick={this.createAccount}>Create account</button></label>\r\n                        </div>}\r\n                        <p id=\"status_message\">gol</p>\r\n                        {this.state.accountSuccessfullyCreated === true ? \r\n                            <p><button className=\"a_redirector\" onClick={() => {\r\n                                    this.setState({accountAvailable : true})\r\n                                    this.accountCredentials = {email : \"\", password : \"\"}\r\n                                }}>\r\n                                Go to login.\r\n                                </button>\r\n                            </p> : <p></p>\r\n                        }\r\n                        {this.state.accountAvailable === true ? \r\n                            <p>No account ? <button className=\"a_redirector\" onClick={() => {\r\n                                document.getElementById(\"status_message\").style.color = \"#02475e\";\r\n                                document.getElementById(\"status_message\").style.display = \"none\"\r\n                                this.setState({accountAvailable : false})\r\n                                this.accountCredentials = {name : \"\", email : \"\", password : \"\", type: `${StartPage.availableUserTypes[0][\"user_type\"]}`, country : \"\"}\r\n                                }}>Create an account</button></p> : \r\n                            <p>Have account ? <button className=\"a_redirector\" onClick={() => {\r\n                                document.getElementById(\"status_message\").style.color = \"#02475e\";\r\n                                document.getElementById(\"status_message\").style.display = \"none\"\r\n                                this.setState({accountAvailable : true})\r\n                                this.accountCredentials = {name : \"\", email : \"\", password : \"\", type: `${StartPage.availableUserTypes[0][\"user_type\"]}`, country : \"\"}\r\n                                }}>Sign in</button>\r\n                            </p>\r\n                        }\r\n                    </div>\r\n                </div> : <p></p>\r\n            }\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n  \r\n  export default StartPage;","import React, { Component } from 'react';\r\n\r\nimport {UsersHandlerService}     from '../services/UsersHandlerService';\r\nimport { GeneralPurposeService } from '../services/GeneralPurposeService';\r\n\r\nimport '../styles/pages-style.css';\r\nimport '../styles/pages-profile.css';\r\n\r\nclass ProfilePage extends Component {\r\n    static userDetailsCategories = [\"storage_status\", \"plan\"]\r\n    static availableUserTypes = null\r\n    \r\n    constructor(props){\r\n        super(props)\r\n        document.getElementById(\"page-name\").innerHTML = \"Profile Page\";\r\n        GeneralPurposeService.setHeaderLayout(\"USER\")\r\n        this.userData = localStorage.getItem('user_data')\r\n        this.state = {\r\n            isUserConnected     : false,\r\n            userType            : \"\",\r\n            userDetailsCategory : ProfilePage.userDetailsCategories[0],\r\n            additionalUserData  : null\r\n        }\r\n    }\r\n\r\n    componentDidUpdate = () => {\r\n        ProfilePage.userDetailsCategories.forEach(category => {\r\n            document.getElementById(`selector_${category}`).style.borderBottom = \r\n                (category === this.state.userDetailsCategory) ? \"3px solid #23049d\" : \"none\";\r\n        })\r\n\r\n        if(this.state.userDetailsCategory === ProfilePage.userDetailsCategories[0] && this.state.additionalUserData === null){\r\n            this.fetchAdditionalUserData()\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        this.fetchAvailableUserTypes()\r\n        this.checkForConnectedUser()\r\n    }\r\n\r\n    fetchAvailableUserTypes = () => {\r\n        UsersHandlerService.getAvailableUserTypes().then(response => {\r\n            if(response.code === 1){\r\n                ProfilePage.availableUserTypes = {}\r\n                response.content.forEach(usertype => {\r\n                    let utype = usertype[\"user_type\"]\r\n                    delete usertype[\"user_type\"]\r\n                    ProfilePage.availableUserTypes[utype] = usertype\r\n                })\r\n            }\r\n            else{\r\n                console.log(response.content)\r\n            }\r\n        })\r\n    }\r\n\r\n    fetchUserType = () => {\r\n        if(this.userData !== null && this.userData !== ''){\r\n            UsersHandlerService.getUserRole(this.userData[\"jwt\"]).then(response => {\r\n                if(response.code === 1){\r\n                    console.log(\"role : \" + response[\"content\"])\r\n                    this.setState({userType : response[\"content\"]})\r\n                }\r\n                else if(response.code === 401){\r\n                    localStorage.setItem(\"user_data\", '')\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    fetchAdditionalUserData = () => {\r\n        UsersHandlerService.getAdditionalUserData(this.userData[\"jwt\"]).then(response => {\r\n            if(response.code === 1){\r\n                this.setState({additionalUserData : response.content})\r\n                localStorage.setItem(\"additional_user_data\", JSON.stringify(response.content))\r\n            }\r\n            else{\r\n                console.log(response.content)\r\n            }\r\n        })\r\n    }\r\n\r\n    checkForConnectedUser = () => {\r\n        this.userData = localStorage.getItem('user_data')\r\n        var status = (this.userData !== null && this.userData !== '')\r\n        this.setState({\r\n            isUserConnected : status,\r\n        });\r\n        if(status === true){\r\n            this.userData = JSON.parse(this.userData)\r\n            document.getElementById(\"log_data_uname\").innerHTML = this.userData[\"name\"];\r\n            document.getElementById(\"log_data_profile\").style.visibility = \"visible\";\r\n        }\r\n        else{\r\n            document.getElementById(\"log_data_uname\").innerHTML = \"\";\r\n            document.getElementById(\"log_data_profile\").style.visibility = \"hidden\";\r\n        }\r\n    }\r\n\r\n    updatePlan = (newplan) => {\r\n        document.getElementById(\"updatePlanStatus\").innerHTML = `Plan updating to ${newplan}...`\r\n        UsersHandlerService.updatePlan(this.userData[\"jwt\"], newplan).then(response => {\r\n            if(response.code === 1){\r\n                document.getElementById(\"updatePlanStatus\").innerHTML = `Plan successfully changed to ${newplan}.`\r\n                this.fetchAdditionalUserData()\r\n                UsersHandlerService.updateUserTypeInternally(this.userData[\"jwt\"], newplan).then(response => {\r\n                    console.log(response)\r\n                    if(response.code === 1){\r\n                        console.log(\"User type changed internally also!\")\r\n                    }\r\n                })\r\n            }\r\n            else{\r\n                console.log(response.content)\r\n            }\r\n        })\r\n    }\r\n\r\n    render() {\r\n        let userDetails = <div></div>\r\n        let generalData = <div></div>\r\n        if(this.state.additionalUserData !== null){\r\n            generalData = \r\n                <div className = \"accountData\">\r\n                    <p className=\"accountDataField\" >\r\n                        Name\r\n                        <span className = \"accountDataValue\">{this.state.additionalUserData[\"name\"]}</span>\r\n                    </p>\r\n                    <p className=\"accountDataField\" >\r\n                        Email\r\n                        <span className = \"accountDataValue\">{this.state.additionalUserData[\"email\"]}</span>\r\n                    </p>\r\n                    <p className=\"accountDataField\" >\r\n                        Country\r\n                        <span className = \"accountDataValue\">{this.state.additionalUserData[\"country\"]}</span>\r\n                    </p>\r\n                    <p className=\"accountDataField\" >\r\n                        Account Plan\r\n                        <span className = \"accountDataValue\">{this.state.additionalUserData[\"type\"]}</span>\r\n                    </p>\r\n                </div>\r\n            switch(this.state.userDetailsCategory){\r\n                case \"storage_status\" : {\r\n                    let total_storage = ProfilePage.availableUserTypes[this.state.additionalUserData[\"type\"]][\"available_storage\"]\r\n                    let available_storage = this.state.additionalUserData[\"storage_quantity\"]\r\n                    let used_storage = total_storage - available_storage\r\n                    userDetails = \r\n                        <div className = \"accountData\">\r\n                            <p className=\"accountDataField\" >\r\n                                Total Storage\r\n                                <span className = \"accountDataValue\">\r\n                                    {GeneralPurposeService.getFileSizeUnit(total_storage)}\r\n                                </span>\r\n                            </p>\r\n                            <p className=\"accountDataField\" >\r\n                                Used Storage\r\n                                <span className = \"accountDataValue\">\r\n                                    {GeneralPurposeService.getFileSizeUnit(used_storage)}\r\n                                </span>\r\n                            </p>\r\n                            <p className=\"accountDataField\" >\r\n                                Available Storage\r\n                                <span className = \"accountDataValue\">\r\n                                    {GeneralPurposeService.getFileSizeUnit(available_storage)}\r\n                                </span>\r\n                            </p>\r\n                        </div>\r\n                    break\r\n                }\r\n                case \"plan\" : {\r\n                    let businessPlans = []\r\n                    Object.keys(ProfilePage.availableUserTypes).forEach(usertype => {\r\n                        if(usertype !== this.state.additionalUserData[\"type\"]){\r\n                            let index = 0;\r\n                            businessPlans.push(\r\n                                <div key={`${index}_upgradeplan`} className=\"upgradeplan\">\r\n                                    <p>{usertype}</p>\r\n                                    <p>{GeneralPurposeService.getFileSizeUnit(ProfilePage.availableUserTypes[usertype][\"available_storage\"])}</p>\r\n                                    <p>{ProfilePage.availableUserTypes[usertype][\"price_dollars\"]} $</p>\r\n                                    <button className=\"redirector\" onClick={() => this.updatePlan(usertype)}>Update to {usertype}</button>\r\n                                    <br/>\r\n                                    <br/>\r\n                                </div>,\r\n                            )\r\n                        }\r\n                    })\r\n                    userDetails = \r\n                        <div className = \"accountData\">\r\n                            <p>Do you want to update your business plan ? </p>\r\n                            <p>Select one of the followings</p>\r\n                            <br/><br/>\r\n                            {businessPlans}\r\n                            <p id=\"updatePlanStatus\"></p>\r\n                        </div>\r\n                    break\r\n                }\r\n                default : {\r\n                    break\r\n                }\r\n            }\r\n        }\r\n        else{\r\n            userDetails = <p>Fetching user data..</p>\r\n        }\r\n\r\n        return (\r\n            <div className=\"App\">\r\n                <div className=\"title\">\r\n                    <img id=\"title_logo\" src=\"images/logo.png\" alt=\"Logo not found\"/>\r\n                    <label id=\"title_text\">Safestorage</label>\r\n                </div>\r\n                <hr/>\r\n                {this.state.isUserConnected === true ?\r\n                    <div className=\"profile\">\r\n                        <div className=\"profile_left\">\r\n                            <img id=\"log_data_profile\" src=\"images/user_logo.png\" alt=\"\"/>\r\n                            <p id=\"username\">{this.userData.name}</p>\r\n                            <hr/>\r\n                            {generalData}\r\n                            \r\n                        </div>\r\n                        <div className=\"profile_right\">\r\n                            <ul>\r\n                                <li><button className=\"a_redirector\" id=\"selector_storage_status\" href=\"#\" onClick={() => {\r\n                                    this.setState({userDetailsCategory: ProfilePage.userDetailsCategories[0]})\r\n                                    }}>Storage Status</button>\r\n                                </li>\r\n                                <li><button className=\"a_redirector\" id=\"selector_plan\" href=\"#\" onClick={() => {\r\n                                    this.setState({userDetailsCategory: ProfilePage.userDetailsCategories[1]})\r\n                                    }}>Plan</button>\r\n                                </li>\r\n                            </ul>\r\n                            <hr/>\r\n                            {userDetails}\r\n                        </div>\r\n                    </div>: \r\n                    <p>Nu puteti accesa aceasta pagina daca utilizatorul nu este conectat</p>\r\n                }\r\n            </div>\r\n      );\r\n    }\r\n}\r\n  \r\n  export default ProfilePage;","import {Environment} from '../environment';\r\nimport {HTTPResponseHandler} from '../services/HTTPResponseHandler';\r\nimport { UsersHandlerService } from './UsersHandlerService';\r\n\r\nexport class FileHandlerService{\r\n    static uploadFile = (file, jwt, description, usertype) => {\r\n        // https://www.smashingmagazine.com/2018/01/drag-drop-file-uploader-vanilla-js/\r\n        \r\n        let url = `${Environment.frontend_proxy}/upload`\r\n\r\n        let additional_user_data = localStorage.getItem(\"additional_user_data\")\r\n        if(additional_user_data === null || additional_user_data === \"\"){\r\n            UsersHandlerService.getAdditionalUserData(jwt).then(response => {\r\n                additional_user_data = response.content\r\n                localStorage.setItem(\"additional_user_data\", JSON.stringify(additional_user_data))\r\n            })\r\n        }\r\n        else{\r\n            additional_user_data = JSON.parse(additional_user_data)\r\n        }\r\n        let formData = new FormData()\r\n        formData.append('file', file)\r\n          \r\n        return new Promise((resolve) => {\r\n            fetch(url, {\r\n                method: 'POST',\r\n                mode : \"cors\",\r\n                body: formData,\r\n                headers : {\r\n                    'Authorization' : `Bearer ${jwt}`,\r\n                    \"version_description\" : description,\r\n                    \"user_type\" : usertype,\r\n                    \"available_storage\" : additional_user_data.storage_quantity\r\n                }\r\n            }).then(response => {\r\n                if(response.ok){\r\n                    response.json().then(response => {\r\n                        resolve({\r\n                            \"code\" : 1,\r\n                            \"content\" : response[\"success status\"]\r\n                        })\r\n                    });\r\n                }\r\n                else{\r\n                    HTTPResponseHandler.handleErrorStatus(response).then(status => {\r\n                        resolve({\r\n                            \"code\" : status.code,\r\n                            \"content\" : status.message\r\n                        })\r\n                    });\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n    static getUserFiles = (jwt) => {\r\n        let url = `${Environment.frontend_proxy}/files`\r\n\r\n        return new Promise((resolve) => {\r\n            fetch(url, {\r\n                method: 'GET',\r\n                mode : \"cors\",\r\n                headers : {\r\n                    'Authorization' : `Bearer ${jwt}`,\r\n                }\r\n            }).then(response => {\r\n                if(response.ok){\r\n                    response.json().then(response => {\r\n                        resolve({\r\n                            \"code\" : 1,\r\n                            \"content\" : response\r\n                        })\r\n                    });\r\n                }\r\n                else{\r\n                    HTTPResponseHandler.handleErrorStatus(response).then(status => {\r\n                        resolve({\r\n                            \"code\" : status.code,\r\n                            \"content\" : status.message\r\n                        })\r\n                    });\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n    static getFileHistory = (jwt, filename) => {\r\n        let url = `${Environment.frontend_proxy}/history?filename=${filename}`\r\n\r\n        return new Promise((resolve) => {\r\n            fetch(url, {\r\n                method: 'GET',\r\n                mode : \"cors\",\r\n                headers : {\r\n                    'Authorization' : `Bearer ${jwt}`,\r\n                }\r\n            }).then(response => {\r\n                if(response.ok){\r\n                    response.json().then(response => {\r\n                        resolve({\r\n                            \"code\" : 1,\r\n                            \"content\" : response\r\n                        })\r\n                    });\r\n                }\r\n                else{\r\n                    HTTPResponseHandler.handleErrorStatus(response).then(status => {\r\n                        resolve({\r\n                            \"code\" : status.code,\r\n                            \"content\" : status.message\r\n                        })\r\n                    });\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n    static deleteFile = (jwt, filename, description) => {\r\n        let url = `${Environment.frontend_proxy}/${filename}`\r\n\r\n        return new Promise((resolve) => {\r\n            fetch(url, {\r\n                method: 'DELETE',\r\n                mode : \"cors\",\r\n                headers : {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization' : `Bearer ${jwt}`,\r\n                },\r\n                body : JSON.stringify({\"description\" : description})\r\n            }).then(response => {\r\n                if(response.ok){\r\n                    response.json().then(response => {\r\n                        resolve({\r\n                            \"code\" : 1,\r\n                            \"content\" : response\r\n                        })\r\n                    });\r\n                }\r\n                else{\r\n                    HTTPResponseHandler.handleErrorStatus(response).then(status => {\r\n                        resolve({\r\n                            \"code\" : status.code,\r\n                            \"content\" : status.message\r\n                        })\r\n                    });\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n    static renameFile = (jwt, filename, newname, description) => {\r\n        let url = `${Environment.frontend_proxy}/${filename}`\r\n\r\n        return new Promise((resolve) => {\r\n            fetch(url, {\r\n                method: 'PUT',\r\n                mode : \"cors\",\r\n                headers : {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization' : `Bearer ${jwt}`,\r\n                },\r\n                body : JSON.stringify({\"description\" : description, \"newname\" : newname})\r\n            }).then(response => {\r\n                if(response.ok){\r\n                    response.json().then(response => {\r\n                        resolve({\r\n                            \"code\" : 1,\r\n                            \"content\" : response\r\n                        })\r\n                    });\r\n                }\r\n                else{\r\n                    HTTPResponseHandler.handleErrorStatus(response).then(status => {\r\n                        resolve({\r\n                            \"code\" : status.code,\r\n                            \"content\" : status.message\r\n                        })\r\n                    });\r\n                }\r\n            })\r\n        })\r\n    }\r\n    \r\n    static downloadFile = (jwt, filename) => {\r\n        let url = `${Environment.frontend_proxy}/${filename}`\r\n\r\n        return new Promise((resolve) => {\r\n            fetch(url, {\r\n                method: 'GET',\r\n                mode : \"cors\",\r\n                headers : {\r\n                    'Authorization' : `Bearer ${jwt}`,\r\n                }\r\n            }).then(response => {\r\n                if(response.ok){\r\n                    response.json().then(response => {\r\n                        resolve({\r\n                            \"code\" : 1,\r\n                            \"content\" : response[\"success status\"]\r\n                        })\r\n                    });\r\n                }\r\n                else{\r\n                    HTTPResponseHandler.handleErrorStatus(response).then(status => {\r\n                        resolve({\r\n                            \"code\" : status.code,\r\n                            \"content\" : status.message\r\n                        })\r\n                    });\r\n                }\r\n            })\r\n        })\r\n    }\r\n}\r\n","import React, { Component }  from 'react';\r\nimport {UsersHandlerService} from '../services/UsersHandlerService';\r\n\r\nimport { FileHandlerService }    from '../services/FileHandlerService';\r\nimport { Environment }           from '../environment';\r\nimport { GeneralPurposeService } from '../services/GeneralPurposeService';\r\n\r\nimport '../styles/pages-style.css';\r\nimport '../styles/pages_usermain.css';\r\nimport '../styles/pages-home-style.css';\r\n\r\nclass MainUserPage extends Component {\r\n    constructor(props){\r\n        super(props)\r\n        document.getElementById(\"page-name\").innerHTML = \"Home Page\";\r\n        this.userData = localStorage.getItem('user_data')\r\n        this.description = null\r\n        this.newname     = null\r\n        this.state = {\r\n            isUserConnected            : false,\r\n            userType                   : null,\r\n            accountAvailable           : true,\r\n            accountSuccessfullyCreated : false,\r\n            userFiles                  : null,\r\n            currentFileName            : null,\r\n            availableNodes             : null,\r\n            fileDetails                : null\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        GeneralPurposeService.setHeaderLayout(\"USER\")\r\n        this.checkForConnectedUser()\r\n        this.fetchUserType().then(_ => {\r\n            this.fetchUserFiles()\r\n        })\r\n    }\r\n\r\n    fetchUserType = () => {\r\n        return new Promise(resolve => {\r\n            try{\r\n                this.setState({userType : this.props.location.state.detail[\"user_type\"]})\r\n                resolve(null)\r\n            }\r\n            catch(e){\r\n                UsersHandlerService.getUserRole(this.userData[\"jwt\"]).then(response => {\r\n                    if(response.code === 1){\r\n                        this.setState({userType : response[\"content\"]})\r\n                    }\r\n                    else if(response.code === 401){\r\n                        localStorage.setItem(\"user_data\", '')\r\n                    }\r\n                    resolve(null)\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    fetchUserFiles = () =>{\r\n        document.getElementById(\"number_of_file\").innerHTML = \"\"\r\n        FileHandlerService.getUserFiles(this.userData[\"jwt\"]).then(response => {\r\n            console.log(response)\r\n            if(response.code === 1){\r\n                document.getElementById(\"number_of_file\").innerHTML = `Found ${response.content.length} files`;\r\n                this.setState({userFiles : (response.content.length === 0) ? null : response.content})\r\n            }\r\n            else{\r\n                this.setState({userFiles : null})\r\n            }\r\n        })\r\n    }\r\n\r\n    checkForConnectedUser = () => {\r\n        this.userData = localStorage.getItem('user_data')\r\n        if(this.userData === null || this.userData === ''){\r\n            this.redirect(\"\")\r\n        }\r\n        else{\r\n            this.userData = JSON.parse(this.userData)\r\n        }\r\n    }\r\n\r\n    redirect = (destination, param) => {\r\n        if(destination !== \"\"){\r\n            localStorage.setItem(\"userfile\", JSON.stringify(param))\r\n            this.props.history.push(destination);\r\n        }\r\n        else{\r\n            this.props.history.push(\"/\")\r\n        }\r\n    }\r\n\r\n    render(){\r\n        var userFiles = []\r\n        if(this.state.userType !== null){\r\n            if(this.state.userFiles !== null){\r\n                this.state.userFiles.forEach(userFile => {\r\n                    let logosrc = `/images/file_logo/${userFile.filename.split(\".\")[1]}.png`\r\n                    if(!Environment.available_logos.includes(userFile.filename.split(\".\")[1])){\r\n                        logosrc = `/images/file_logo/extra.png` \r\n                    }\r\n                    userFiles.push(\r\n                        <tr key={`div_${userFile.filename}`}>\r\n                            <td><img alt=\"logo\" src={logosrc}></img></td>\r\n                            <td className = \"table_fname\">\r\n                                <p><button className=\"a_redirector\"\r\n                                    style={{fontSize:\"90%\", textDecoration:\"underline\"}} \r\n                                    onClick={() => this.redirect(\"/details\", userFile)} \r\n                                    >{`${userFile.filename + \"\"}`}</button>\r\n                                </p><br/>\r\n                                <span>{`Version : ${userFile.version}`}</span><br/>\r\n                                <span>{`Size : ${GeneralPurposeService.getFileSizeUnit(userFile.filesize)}`}</span>\r\n                            </td>\r\n                            <td className = \"table_version\"><p>{`${userFile.version_description}`}</p></td>\r\n                            <td className = \"table_version\"><p>{`${userFile.hash.toString(16)}`}</p></td>\r\n                        </tr>\r\n                    )\r\n                })\r\n            }\r\n        }\r\n        return(\r\n            <div className=\"App\">\r\n                <div className=\"Home\">\r\n                    <div>\r\n                        <div className=\"home_header\">\r\n                            <p id=\"p_filename\">My files</p>\r\n                            <p id=\"number_of_file\">&nbsp;</p>\r\n                        </div>\r\n                        <hr id=\"mainpage_hr\"/>\r\n                        <br/><br/>\r\n                        <div className = \"home_body_main_div\">\r\n                            {this.state.userFiles === null ? \r\n                                <div style={{width:\"100%\"}}>\r\n                                    <img src= \"/images/not_found.png\" />\r\n                                    <br/><br/><br/>\r\n                                    <p>No file found!</p>\r\n                                    <br/>\r\n                                    <p>Please consider uploading a file first!</p>\r\n                                </div>:\r\n                                <table>\r\n                                    <thead>\r\n                                        <tr>\r\n                                            <td>Logo</td>\r\n                                            <td>File name</td>\r\n                                            <td>Version Description</td>\r\n                                            <td>Hash</td>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        {userFiles}\r\n                                    </tbody>\r\n                                </table>\r\n                            }\r\n                        </div>\r\n                    </div> \r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default MainUserPage;","import {Environment} from '../environment';\r\nimport {HTTPResponseHandler} from '../services/HTTPResponseHandler';\r\nimport { GeneralPurposeService } from './GeneralPurposeService';\r\n\r\nexport class AdminHandlerService{\r\n    static fetchLog = (jwt, logCriteria) => {\r\n        let url = `${Environment.rest_api}/log`\r\n        \r\n        url += GeneralPurposeService.prepareURLQuery(logCriteria)\r\n\r\n        return new Promise((resolve) => {\r\n            fetch(url, {\r\n                method: 'GET',\r\n                mode : \"cors\",\r\n                headers : {\r\n                    'Authorization' : `Bearer ${jwt}`,\r\n                },\r\n            }).then(response => {\r\n                if(response.ok){\r\n                    response.json().then(response => {\r\n                        resolve({\r\n                            \"code\" : 1,\r\n                            \"content\" : response\r\n                        })\r\n                    });\r\n                }\r\n                else{\r\n                    HTTPResponseHandler.handleErrorStatus(response).then(status => {\r\n                        resolve({\r\n                            \"code\" : status.code,\r\n                            \"content\" : status.message\r\n                        })\r\n                    });\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n    static fetchAvailableNodesFromAPI = (jwt) => {\r\n        let url = `${Environment.rest_api}/internalnode/all`\r\n\r\n        return new Promise((resolve) => {\r\n            fetch(url, {\r\n                method: 'GET',\r\n                mode : \"cors\",\r\n                headers : {\r\n                    'Authorization' : `Bearer ${jwt}`,\r\n                }\r\n            }).then(response => {\r\n                if(response.ok){\r\n                    response.json().then(response => {\r\n                        resolve({\r\n                            \"code\" : 1,\r\n                            \"content\" : response\r\n                        })\r\n                    });\r\n                }\r\n                else{\r\n                    HTTPResponseHandler.handleErrorStatus(response).then(status => {\r\n                        resolve({\r\n                            \"code\" : status.code,\r\n                            \"content\" : status.message\r\n                        })\r\n                    });\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n    static cleanLog = (jwt, logCriteria) => {\r\n        console.log(\"cleaning log...\")\r\n\r\n        let url = `${Environment.rest_api}/log`\r\n        \r\n        url += GeneralPurposeService.prepareURLQuery(logCriteria)\r\n\r\n        return new Promise((resolve) => {\r\n            fetch(url, {\r\n                method: 'DELETE',\r\n                mode : \"cors\",\r\n                headers : {\r\n                    'Authorization' : `Bearer ${jwt}`,\r\n                }\r\n            }).then(response => {\r\n                if(response.ok){\r\n                    response.json().then(response => {\r\n                        resolve({\r\n                            \"code\" : 1,\r\n                            \"content\" : response\r\n                        })\r\n                    });\r\n                }\r\n                else{\r\n                    HTTPResponseHandler.handleErrorStatus(response).then(status => {\r\n                        resolve({\r\n                            \"code\" : status.code,\r\n                            \"content\" : status.message\r\n                        })\r\n                    });\r\n                }\r\n            })\r\n        })\r\n    }\r\n    \r\n\r\n    static fetchNodesStoringFile = (jwt, userId, filename) => {\r\n        let url = `${Environment.frontend_proxy}/nodesforfile?user=${userId}&filename=${GeneralPurposeService.sanitizeURL(filename)}`\r\n        return new Promise((resolve) => {\r\n            fetch(url, {\r\n                method: 'GET',\r\n                mode : \"cors\",\r\n                headers : {\r\n                    'Authorization' : `Bearer ${jwt}`,\r\n                },\r\n            }).then(response => {\r\n                if(response.ok){\r\n                    response.json().then(response => {\r\n                        resolve({\r\n                            \"code\" : 1,\r\n                            \"content\" : response\r\n                        })\r\n                    });\r\n                }\r\n                else{\r\n                    HTTPResponseHandler.handleErrorStatus(response).then(status => {\r\n                        resolve({\r\n                            \"code\" : status.code,\r\n                            \"content\" : status.message\r\n                        })\r\n                    });\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n    static fetchNodeData = (jwt, nodeAddress) => {\r\n        let url = `${Environment.rest_api}/internalnode/${nodeAddress}`\r\n        \r\n        return new Promise((resolve) => {\r\n            fetch(url, {\r\n                method: 'GET',\r\n                mode : \"cors\",\r\n                headers : {\r\n                    'Authorization' : `Bearer ${jwt}`,\r\n                }\r\n            }).then(response => {\r\n                if(response.ok){\r\n                    response.json().then(response => {\r\n                        resolve({\r\n                            \"code\" : 1,\r\n                            \"content\" : response\r\n                        })\r\n                    });\r\n                }\r\n                else{\r\n                    HTTPResponseHandler.handleErrorStatus(response).then(status => {\r\n                        resolve({\r\n                            \"code\" : status.code,\r\n                            \"content\" : status.message\r\n                        })\r\n                    });\r\n                }\r\n            })\r\n        })\r\n    } \r\n\r\n    static getFileVersions = (jwt, userid, filename) => {\r\n        let url = `${Environment.frontend_proxy}/versions?filename=${filename}&userid=${userid}`\r\n\r\n        return new Promise((resolve) => {\r\n            fetch(url, {\r\n                method: 'GET',\r\n                mode : \"cors\",\r\n                headers : {\r\n                    'Authorization' : `Bearer ${jwt}`,\r\n                },\r\n            }).then(response => {\r\n                if(response.ok){\r\n                    response.json().then(response => {\r\n                        resolve({\r\n                            \"code\" : 1,\r\n                            \"content\" : response\r\n                        })\r\n                    });\r\n                }\r\n                else{\r\n                    HTTPResponseHandler.handleErrorStatus(response).then(status => {\r\n                        resolve({\r\n                            \"code\" : status.code,\r\n                            \"content\" : status.message\r\n                        })\r\n                    });\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n    static deleteFileFromInternalNode = (jwt, file) => {\r\n        let url = `${Environment.frontend_proxy}/internalnodefile?user=${file.user}&filename=${file.filename}&address=${file.address}`\r\n\r\n        return new Promise((resolve) => {\r\n            fetch(url, {\r\n                method: 'DELETE',\r\n                mode : \"cors\",\r\n                headers : {\r\n                    'Authorization' : `Bearer ${jwt}`,\r\n                }\r\n            }).then(response => {\r\n                if(response.ok){\r\n                    response.json().then(response => {\r\n                        resolve({\r\n                            \"code\" : 1,\r\n                            \"content\" : response\r\n                        })\r\n                    });\r\n                }\r\n                else{\r\n                    HTTPResponseHandler.handleErrorStatus(response).then(status => {\r\n                        resolve({\r\n                            \"code\" : status.code,\r\n                            \"content\" : status.message\r\n                        })\r\n                    });\r\n                }\r\n            })\r\n        })\r\n    }\r\n}\r\n\r\n","import React, { Component }  from 'react';\r\nimport {UsersHandlerService} from '../services/UsersHandlerService';\r\n\r\nimport { GeneralPurposeService } from '../services/GeneralPurposeService';\r\nimport { AdminHandlerService }   from '../services/AdminHandlerService';\r\nimport { Environment }           from '../environment';\r\nimport { PieChart }              from 'react-minimal-pie-chart';\r\n\r\nimport '../styles/pages-style.css';\r\nimport '../styles/pages-home-style.css';\r\nimport '../styles/pages-admin-style.css';\r\n\r\nclass AdminMainPage extends Component {\r\n    constructor(props){\r\n        super(props)\r\n        document.getElementById(\"page-name\").innerHTML = \"Admin console\";\r\n        this.userData = localStorage.getItem('user_data')\r\n        this.menu_selection = null\r\n        this.state = {\r\n            isUserConnected    : false,\r\n            userType           : null,\r\n            accountAvailable   : true,\r\n            availableNodes     : null,\r\n            log                : null,\r\n            replication_status : null,\r\n            content            : null,\r\n            content_nodes_data : null,\r\n            file_versions      : null,\r\n            storagestatus      : null,\r\n            current_address    : null,\r\n            connectionTable    : {\"addresses\" : null, \"status\" : null, \"current_address\" : null},\r\n            websocket          : {\"connected\" : false, \"subscriptions\" : null},\r\n            error_status       : {code : -1, message : \"\"}\r\n        }\r\n        this.logCriteria = {message_type : \"ALL\", node_address : \"ALL\", date1 : GeneralPurposeService.getCurrentTimestampForLogging(\"1 year\")}\r\n        this.webSocketConnection = null;\r\n        this.selectedFile        = null\r\n        GeneralPurposeService.setHeaderLayout(\"ADMIN\")\r\n        document.getElementById(\"log_redirector\").onclick = () => this.adminAction(\"log\")\r\n        document.getElementById(\"content-table_redirector\").onclick = () => this.adminAction(\"content\")\r\n        document.getElementById(\"storage-table_redirector\").onclick = () => this.adminAction(\"storage\")\r\n        document.getElementById(\"nodes-status_redirector\").onclick = () => this.adminAction(\"nodes\")\r\n        document.getElementById(\"replication-status_redirector\").onclick = () => this.adminAction(\"replication\")\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        this.checkForConnectedUser()\r\n        this.fetchUserType().then(usertype_result => {\r\n            if(usertype_result !== undefined){\r\n                this.fetchAvailableNodes().then(response => {\r\n                    if(response !== undefined){\r\n                        if(this.state.error_status.code === -1){\r\n                            this.adminAction('log')\r\n                            Environment.getWebSocket().then(response => {\r\n                                this.webSocketConnection = response\r\n                                this.setState({websocket : {\"connected\" : true}}, () => {\r\n                                    if(this.menu_selection !== null){\r\n                                        this.adminAction(this.menu_selection)\r\n                                    }\r\n                                })\r\n                            })\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    fetchAvailableNodes = () => {\r\n        return new Promise(resolve => {\r\n            AdminHandlerService.fetchAvailableNodesFromAPI(this.userData[\"jwt\"]).then(response => {\r\n                if(response.code === 1){\r\n                    this.setState({availableNodes : response.content})\r\n                    resolve(null)\r\n                }\r\n                else{\r\n                    this.setState({error_status : {code : response.code, message : response.content}})\r\n                    if(response.code === 401 || response.code === 402){\r\n                        resolve(undefined)\r\n                    }\r\n                    else{\r\n                        resolve(null)\r\n                    }\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n    fetchUserType = () => {\r\n        return new Promise(resolve => {\r\n            try{\r\n                this.setState({userType : this.props.location.state.detail[\"user_type\"]})\r\n                resolve(null)\r\n            }\r\n            catch(e){\r\n                UsersHandlerService.getUserRole(this.userData[\"jwt\"]).then(response => {\r\n                    if(response.code === 1){\r\n                        this.setState({userType : response[\"content\"]})\r\n                        resolve(null)\r\n                    }\r\n                    else{\r\n                        this.setState({error_status : {code : response.code, message : response.content}})\r\n                        if(response.code === 401 || response.code === 402){\r\n                            resolve(undefined)\r\n                        }\r\n                        else{\r\n                            resolve(null)\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    checkForConnectedUser = () => {\r\n        this.userData = localStorage.getItem('user_data')\r\n        if(this.userData === null || this.userData === ''){\r\n            this.redirect(\"\")\r\n        }\r\n        else{\r\n            this.userData = JSON.parse(this.userData)\r\n        }\r\n    }\r\n\r\n    handleContentTable = (message) => {\r\n        if (message.body) {\r\n            let content = JSON.parse(message.body)\r\n            console.log(content)\r\n            if(content.length > 0){\r\n                this.setState({content : content})\r\n            }\r\n            else{\r\n                this.setState({content : undefined})\r\n            }\r\n        }\r\n    }\r\n\r\n    fetchFileVersions = (userid, filename) => {\r\n        AdminHandlerService.getFileVersions(this.userData[\"jwt\"], userid, filename).then(response => {\r\n            if(response.code === 1){\r\n                this.setState({file_versions : response.content})\r\n                document.getElementById(\"replication_nodes_div\").style.display = \"none\"\r\n                document.getElementById(\"versions_nodes_div\").style.display = \"block\"\r\n                document.getElementById(\"subject_filename\").innerHTML = filename\r\n            }\r\n            else{\r\n                this.setState({error_status : {code : response.code, message : response.content}})\r\n            }\r\n        })\r\n    }\r\n\r\n    handleReplicationManagerStatus = (message) => {\r\n        if (message.body) {\r\n            let content = JSON.parse(message.body)\r\n            console.log(content)\r\n            if(content.length > 0){\r\n                this.setState({replication_status : content})\r\n            }\r\n            else{\r\n                this.setState({replication_status : undefined})\r\n            }\r\n        }\r\n    }\r\n\r\n    handleConnectionTable = (message) => {\r\n        if (message.body) {\r\n            let content = JSON.parse(message.body)\r\n            let nodes_details = this.state.connectionTable.status\r\n            let current_address = this.state.connectionTable.current_address\r\n            this.setState({connectionTable : {\"addresses\" : content, \"status\" : nodes_details, \"current_address\" : current_address}})\r\n        }\r\n    }\r\n\r\n    handleNodesActivity = (message) => {\r\n        if (message.body) {\r\n            let addresses = this.state.connectionTable.addresses\r\n            let current_address = this.state.connectionTable.current_address\r\n            this.setState({connectionTable : {\"addresses\" : addresses, \"status\" : JSON.parse(message.body), \"current_address\" : current_address}})\r\n        }\r\n    }\r\n\r\n    highlightNodeStatus = (selectedAddress, label) => {\r\n        let addressList = null\r\n        let identificator = null\r\n        if(label === 0){\r\n            addressList = this.state.connectionTable.addresses\r\n            identificator = \"node_status_address\"\r\n            \r\n        }\r\n        else if(label === 1){\r\n            addressList = Object.keys(this.state.storagestatus)\r\n            identificator = \"storage_status_address\"\r\n        }\r\n\r\n        addressList.forEach(address => {\r\n            if(address === selectedAddress){\r\n                document.getElementById(`${identificator}_${address}`).style.fontSize = \"125%\" \r\n                document.getElementById(`${identificator}_${address}`).style.color = \"#39A9CB\"; \r\n            }\r\n            else{\r\n                document.getElementById(`${identificator}_${address}`).style.fontSize = \"105%\" \r\n                document.getElementById(`${identificator}_${address}`).style.color = \"#344fa1\"; \r\n            }\r\n        })\r\n        \r\n    }\r\n\r\n    handleStorageStatus = (message) => {\r\n        if (message.body) {\r\n            let storage_status = {}\r\n            let first_address = this.state.current_address\r\n            let content = JSON.parse(message.body)\r\n            if(content.length > 0){\r\n                content.forEach(register => {\r\n                    register.nodesAddresses.forEach(address => {\r\n                        if(first_address === null){\r\n                            first_address = address\r\n                        }\r\n                        let node_registers = []\r\n                        if(Object.keys(storage_status).includes(address)){\r\n                            node_registers = storage_status[address]\r\n                        }\r\n                        node_registers.push(register)\r\n                        storage_status[address] = node_registers\r\n                    })\r\n                })\r\n                this.setState({storagestatus : storage_status, current_address : first_address})\r\n            }\r\n            else{\r\n                this.setState({storagestatus : undefined, current_address : null})\r\n            }\r\n        }\r\n    }\r\n\r\n    adminAction = (actionName) => {\r\n        if(this.state.error_status.code !== 401 && this.state.error_status.code !== 402){\r\n            this.menu_selection = actionName\r\n            let views = [\"admin_log_view\", \"admin_content_view\", \"admin_nodes_view\",\r\n                \"admin_replication_view\", \"admin_storagestatus_view\"    \r\n            ]\r\n\r\n            views.forEach(view => {\r\n                document.getElementById(view).style.display = \"none\"\r\n            })\r\n\r\n            if(this.state.websocket.connected === true && this.state.websocket.subscriptions !== undefined){\r\n                this.state.websocket.subscriptions.forEach(_ => _.unsubscribe())\r\n            }\r\n\r\n        let current_topic = []\r\n        let handleFunction = []\r\n        switch(actionName){\r\n            case \"log\":{\r\n                document.getElementById(\"admin_log_view\").style.display = \"block\"\r\n                document.getElementById(\"admin_title\").innerHTML = \"Log Data\"\r\n                this.fetchLogByCriteriaUpdate(null, null)\r\n                break;\r\n            }\r\n            case \"content\":{\r\n                document.getElementById(\"admin_content_view\").style.display = \"block\"\r\n                document.getElementById(\"admin_title\").innerHTML = \"Content Table\"\r\n                current_topic = [\"/topic/content\"]\r\n                handleFunction = [this.handleContentTable]\r\n                break;\r\n            }\r\n            case \"storage\":{\r\n                document.getElementById(\"admin_storagestatus_view\").style.display = \"block\"\r\n                document.getElementById(\"admin_title\").innerHTML = \"Storage Status Table\"\r\n                current_topic = [\"/topic/storage\"]\r\n                handleFunction = [this.handleStorageStatus]\r\n                break;\r\n            }\r\n            case \"nodes\":{\r\n                document.getElementById(\"admin_nodes_view\").style.display = \"block\"\r\n                document.getElementById(\"admin_title\").innerHTML = \"Nodes Status Table\"\r\n                current_topic = [\"/topic/nodes\", \"/topic/connection\"]\r\n                handleFunction = [this.handleNodesActivity, this.handleConnectionTable]\r\n                break;\r\n            }\r\n            case \"replication\":{\r\n                document.getElementById(\"admin_replication_view\").style.display = \"block\"\r\n                document.getElementById(\"admin_title\").innerHTML = \"Replication Status\"\r\n                current_topic = [\"/topic/replication\"]\r\n                handleFunction = [this.handleReplicationManagerStatus]\r\n                break;\r\n            }\r\n            default : break;\r\n        }\r\n        if(this.state.websocket.connected === true){\r\n            let subscriptions = []\r\n            let index = 0;\r\n            current_topic.forEach(topic => {\r\n                let func = handleFunction[index]\r\n                subscriptions.push(this.webSocketConnection.subscribe(topic, (msg) => func(msg)))\r\n                index += 1\r\n            })\r\n            this.setState({websocket : {\"connected\" : true, \"subscriptions\" : subscriptions}})\r\n        }\r\n    }\r\n    }\r\n\r\n    fetchLogByCriteriaUpdate = (criteria, updatevalue) => {\r\n        if(criteria !== null && updatevalue !== null){\r\n            this.logCriteria[criteria] = updatevalue\r\n        }\r\n        AdminHandlerService.fetchLog(this.userData[\"jwt\"], this.logCriteria).then(response => {\r\n            if(response.code === 1){\r\n                this.setState({log : response.content})\r\n            }\r\n            else{\r\n                this.setState({log : []})\r\n            }\r\n        })\r\n    }\r\n\r\n    cleanLog = () =>{\r\n        AdminHandlerService.cleanLog(this.userData[\"jwt\"], this.logCriteria).then(response => {\r\n            if(response.code === 1){\r\n                this.fetchLogByCriteriaUpdate(null, null)\r\n            }\r\n            else{\r\n                this.setState({error_status : {code : response.code, message : response.content}})\r\n            }\r\n        })\r\n    }\r\n\r\n    fetchReplicationNodesForFile = (userId, filename) => {\r\n        this.setState({content_nodes_data : []})\r\n        AdminHandlerService.fetchNodesStoringFile(this.userData[\"jwt\"], userId, filename).then(response => {\r\n            if(response.code === 1){\r\n                document.getElementById(\"replication_nodes_div\").style.display = \"block\"\r\n                document.getElementById(\"versions_nodes_div\").style.display = \"none\"\r\n                document.getElementById(\"subject_filename\").innerHTML = filename\r\n                response.content.forEach(address => {\r\n                    AdminHandlerService.fetchNodeData(this.userData[\"jwt\"], address).then(response => {\r\n                        if(response.code === 1){\r\n                            let content_nodes = this.state.content_nodes_data\r\n                            content_nodes.push(response.content)\r\n                            this.setState({content_nodes_data : content_nodes})\r\n                        }\r\n                        else{\r\n                            this.setState({error_status : {code : response.code, message : response.content}})\r\n                        }\r\n                    })\r\n                })\r\n            }\r\n            else{\r\n                this.setState({error_status : {code : response.code, message : response.content}})\r\n            }\r\n        })\r\n    }\r\n\r\n    deleteFileFromInternalNode = () => {\r\n        AdminHandlerService.deleteFileFromInternalNode(this.userData[\"jwt\"], this.selectedFile).then(response => {\r\n            if(response.code === 1){\r\n                document.getElementById(\"storagestatus_delete_status\").style.visibility = \"visible\"\r\n            }\r\n            else{\r\n                this.setState({error_status : {code : response.code, message : response.content}})\r\n            }\r\n        })\r\n    }\r\n\r\n    redirect = (destination) => {\r\n        if(destination !== \"\"){\r\n            this.props.history.push(destination)\r\n        }\r\n        else{\r\n            this.props.history.push(\"/\")\r\n        }\r\n    }\r\n\r\n    render(){\r\n        var replicationNodesForFile = []\r\n        var versionForFile = []\r\n        var availableNodesSelect = []\r\n        var logData = []\r\n        var content = []\r\n        var storagestatus_nodes = {addresses : [], files : [], additional_data : []}\r\n        var nodes_status = {addresses : [], status : []}\r\n        var replication_status = []\r\n        if(this.state.userType !== null && this.state.code !== 402){\r\n            if(this.state.availableNodes != null){\r\n                this.state.availableNodes.forEach(node => {\r\n                    availableNodesSelect.push(<option key={`optionkey_${node[\"ip_address\"]}`} value={node[\"ip_address\"]}>{node[\"ip_address\"]}</option>)\r\n                })\r\n            }\r\n            if(this.state.log !== null){\r\n                this.state.log.forEach(log_register => {\r\n                    logData.push(\r\n                        <tr key={`log_${log_register.registerId}`}>\r\n                            <td><p>{log_register.node_address}</p></td>\r\n                            <td><p>{log_register.message_type}</p></td>\r\n                            <td><p>{log_register.description}</p></td>\r\n                            <td><p>{GeneralPurposeService.getCurrentTimestamp(new Date(log_register.register_date))}</p></td>\r\n                        </tr>\r\n                    )\r\n                })\r\n            }\r\n            if(this.state.content !== null){\r\n                document.getElementById(\"admin_view_title_0\").style.visibility = \"hidden\"\r\n                if(this.state.content !== undefined){\r\n                    this.state.content.forEach(content_register => {\r\n                        content.push(\r\n                            <tr key={`content_${content_register.userId}_${content_register.filename}`}>\r\n                                <td><p>{content_register.userId}</p></td>\r\n                                <td><p>{content_register.filename}</p></td>\r\n                                <td>\r\n                                    {content_register.status === \"[DELETED]\" || content_register.status === \"[RENAMED]\"? <p>{content_register.versionNo}</p> : \r\n                                        <p><button className=\"a_redirector\"\r\n                                            style={{fontSize:\"120%\", textDecoration:\"underline\"}} \r\n                                            onClick={() => {\r\n                                                this.fetchFileVersions(content_register.userId, content_register.filename)\r\n                                            }}\r\n                                            onMouseOver={() => {\r\n                                                document.getElementById(\"admin_view_title_1\").style.visibility = \"visible\"\r\n                                                document.getElementById(\"admin_view_title_1\").innerHTML = \"Click to see the version of this file\"\r\n                                            }}\r\n                                            onMouseLeave={() => {\r\n                                                document.getElementById(\"admin_view_title_1\").style.visibility = \"hidden\"\r\n                                            }}\r\n                                            >{content_register.versionNo}</button>\r\n                                        </p>\r\n                                    }\r\n                                </td>\r\n                                <td><p>{content_register.crc.toString(16)}</p></td>\r\n                                <td><p>{GeneralPurposeService.getFileSizeUnit(content_register.fileSize)}</p></td>\r\n                                <td>\r\n                                    {content_register.status === \"[DELETED]\" || content_register.status === \"[RENAMED]\"? <p>{content_register.replication_factor}</p> : \r\n                                        <p><button className=\"a_redirector\"\r\n                                            style={{fontSize:\"120%\", textDecoration:\"underline\"}} \r\n                                            onClick={() => this.fetchReplicationNodesForFile(content_register.userId, content_register.filename)} \r\n                                            onMouseOver={() => {\r\n                                                document.getElementById(\"admin_view_title_1\").style.visibility = \"visible\"\r\n                                                document.getElementById(\"admin_view_title_1\").innerHTML = \"Click to see the nodes that store this file\"\r\n                                            }}\r\n                                            onMouseLeave={() => {document.getElementById(\"admin_view_title_1\").style.visibility = \"hidden\"}}\r\n                                            >{content_register.replication_factor}</button>\r\n                                        </p>\r\n                                    }\r\n                                </td>\r\n                                <td><p>{content_register.status}</p></td>\r\n                            </tr>\r\n                        )\r\n                    })\r\n                }\r\n            }\r\n            if(this.state.file_versions !== null){\r\n                this.state.file_versions.forEach(version => {\r\n                    versionForFile.push(\r\n                        <p className=\"admin_view_title\" style={{fontSize:\"90%\"}}>{version.version_no}. {version.version_desc} ({version.version_hash.toString(16)})</p>\r\n                    )\r\n                    versionForFile.push(<br/>)\r\n                })\r\n            }\r\n            if(this.state.content_nodes_data !== null){\r\n                this.state.content_nodes_data.forEach(node => {\r\n                    replicationNodesForFile.push(\r\n                        <div>\r\n                            <p className=\"admin_view_title\" style={{fontSize:\"90%\"}}>{node.ip_address} from {node.location_country}</p>\r\n                        </div>\r\n                    )\r\n                })\r\n            }\r\n            if(this.state.storagestatus !== null && this.state.storagestatus !== undefined){\r\n                replicationNodesForFile = []\r\n                storagestatus_nodes.addresses = []\r\n                Object.keys(this.state.storagestatus).forEach(address => {\r\n                    storagestatus_nodes.addresses.push(\r\n                        <button\r\n                            id = {`storage_status_address_${address}`}  \r\n                            className=\"a_redirector\" \r\n                            href=\"#\"\r\n                            style={{marginTop:\"-15%\"}} \r\n                            onClick={() => { \r\n                                this.setState({current_address : address})\r\n                                document.getElementById(\"storage_additional_data\").style.visibility = \"hidden\"\r\n                                document.getElementById(\"storagestatus_delete_status\").style.visibility = \"hidden\"\r\n                                document.getElementById(\"subject_filename_1\").innerHTML = \"\"\r\n                                this.highlightNodeStatus(address, 1)\r\n                            }}>{address}\r\n                        </button>\r\n                    )\r\n                })\r\n            }\r\n            if(this.state.current_address !== null && this.state.current_address !== undefined){\r\n                storagestatus_nodes.files = []\r\n                console.log(this.state.storagestatus[this.state.current_address])\r\n                if(this.state.storagestatus[this.state.current_address] !== undefined){\r\n                    this.state.storagestatus[this.state.current_address].forEach(file => {\r\n                        let indexOfAddress = file.nodesAddresses.indexOf(this.state.current_address)\r\n                        let another_nodes = []\r\n                        file.nodesAddresses.forEach(address => {\r\n                            if(address !== this.state.current_address){\r\n                                another_nodes.push(<p style={{display:\"block\", fontSize: \"80%\"}}>{address}</p>)\r\n                            }\r\n                        })\r\n                        storagestatus_nodes.files.push(\r\n                            <tr key={`storagestatus_${file.userId}_${file.filename}`}>\r\n                                <td><p>{file.userId}</p></td>\r\n                                <td>\r\n                                    <p><button className=\"a_redirector\"\r\n                                        style={{fontSize:\"120%\", textDecoration:\"underline\"}} \r\n                                        onClick={() => {\r\n                                            document.getElementById(\"storagestatus_delete_status\").style.visibility = \"hidden\"\r\n                                            document.getElementById(\"storage_additional_data\").style.visibility = \"visible\"\r\n                                            document.getElementById(\"subject_filename_1\").innerHTML = file.filename\r\n                                            this.selectedFile = {\"user\" : file.userId, \"filename\" : file.filename, \"address\" : this.state.current_address}\r\n                                        }} \r\n                                        onMouseOver={() => {\r\n                                            document.getElementById(\"admin_view_title_11\").style.visibility = \"visible\"\r\n                                            document.getElementById(\"admin_view_title_11\").innerHTML = \"Click for more details about this file\"\r\n                                        }}\r\n                                        onMouseLeave={() => {\r\n                                            document.getElementById(\"admin_view_title_11\").style.visibility = \"hidden\"\r\n                                        }}\r\n                                        >{file.filename}</button>\r\n                                    </p>\r\n                                </td>\r\n                                <td><p>{file.nodesVersions[indexOfAddress]}</p></td>\r\n                                <td><p>{file.nodesCRCs[indexOfAddress].toString(16)}</p></td>\r\n                                <td>{another_nodes}</td>\r\n                            </tr>\r\n                        )\r\n                    })\r\n                }\r\n            }\r\n\r\n            if(this.state.connectionTable.addresses !== null){\r\n                nodes_status.addresses = []\r\n                let first_address = this.state.connectionTable.current_address\r\n                console.log(\"first_address: \" + first_address)\r\n                this.state.connectionTable.addresses.forEach(address => {\r\n                    if(first_address === null || first_address === undefined){\r\n                        first_address = address;\r\n                        let addresses = this.state.connectionTable.addresses\r\n                        let status = this.state.connectionTable.status\r\n                        this.setState({connectionTable : {addresses : addresses, status : status, current_address : first_address}})\r\n                    }\r\n                    nodes_status.addresses.push(\r\n                        <button\r\n                            id = {`node_status_address_${address}`} \r\n                            className = \"a_redirector\" \r\n                            href=\"#\"\r\n                            style={{marginTop:\"-10%\"}} \r\n                            onClick={() => {\r\n                                let addresses = this.state.connectionTable.addresses\r\n                                let status = this.state.connectionTable.status\r\n                                this.highlightNodeStatus(address, 0)\r\n                                this.setState({connectionTable : {addresses : addresses, status : status, current_address : address}})\r\n                            }}>{address}\r\n                        </button>\r\n                    )                          \r\n                })\r\n            }\r\n\r\n            if(this.state.connectionTable.current_address !== null && this.state.connectionTable.current_address !== undefined){\r\n                let warnings = 0\r\n                let errors = 0\r\n                let internal_log = this.state.log.filter(register => register.node_address === this.state.connectionTable.current_address)\r\n                internal_log.forEach(register => {\r\n                    if(register.message_type === \"WARNING\"){\r\n                        warnings += 1\r\n                    }\r\n                    if(register.message_type === \"ERROR\"){\r\n                        errors += 1\r\n                    }\r\n                })\r\n                nodes_status.status = []\r\n                nodes_status.status.push(<p className=\"admin_view_title\">The status of the internal node</p>)\r\n                nodes_status.status.push(<br/>)\r\n                nodes_status.status.push(<p className=\"admin_view_title\">{this.state.connectionTable.current_address}</p>)\r\n                nodes_status.status.push(<br/>)\r\n                nodes_status.status.push(<br/>)\r\n                if(this.state.availableNodes !== null){\r\n                    this.state.availableNodes.forEach(node => {\r\n                        if(node.ip_address === this.state.connectionTable.current_address){\r\n                            nodes_status.status.push(<p className=\"admin_view_title\">Location : {node.location_country}</p>)\r\n                            nodes_status.status.push(<br/>)\r\n                            nodes_status.status.push(<br/>)\r\n                        }\r\n                    })\r\n                }\r\n                if(this.state.connectionTable.status !== null){\r\n                    this.state.connectionTable.status.forEach(address => {\r\n                        if(address.ip_address === this.state.connectionTable.current_address){\r\n                                let used_storage  = GeneralPurposeService.getFileSizeUnit(address.used_storage)\r\n                            let total_storage = GeneralPurposeService.getFileSizeUnit(address.total_storage)\r\n                            let percent = address.used_storage / address.total_storage * 100\r\n                            percent = Math.round(percent * 100000) / 100000\r\n\r\n                            nodes_status.status.push(<p className=\"admin_view_title\">\r\n                                Used storage<br/><br/>\r\n                                {used_storage} / {total_storage}&nbsp;&nbsp;&nbsp;\r\n                                ({percent} %)\r\n                            </p>)\r\n                            nodes_status.status.push(<br/>)\r\n                            nodes_status.status.push(<br/>)\r\n                            used_storage = Math.ceil(address.used_storage / 1000)\r\n                            let available_storage = Math.ceil((address.total_storage - used_storage) / 1000)\r\n                            if(used_storage < available_storage * 0.005){\r\n                                used_storage = available_storage * 0.005 + used_storage\r\n                            }\r\n\r\n                            nodes_status.status.push(\r\n                                <PieChart\r\n                                    style={{width:\"20%\", height:\"20%\"}}\r\n                                    data={[\r\n                                        { title: 'Used Storage', value: used_storage, color: '#c84b31' },\r\n                                        { title: 'Available Storage', value: available_storage, color: '#1eae98' },\r\n                                    ]}\r\n                                />\r\n                            )\r\n                        }\r\n                    })\r\n                }\r\n                nodes_status.status.push(<br/>)\r\n                nodes_status.status.push(<br/>)\r\n                nodes_status.status.push(<p className=\"admin_view_title\">This node encountered {warnings} warnings and {errors} errors.</p>)\r\n                nodes_status.status.push(<br/>)\r\n                nodes_status.status.push(<br/>)\r\n            }\r\n            if(this.state.replication_status !== null && this.state.replication_status !== undefined){\r\n                replication_status = []\r\n                this.state.replication_status.forEach(status => {\r\n                    replication_status.push(<p className=\"admin_view_title\">{status}</p>)\r\n                    replication_status.push(<br/>)\r\n                })\r\n            }\r\n        }\r\n        return(\r\n            <div className=\"App\">\r\n                <div className=\"Home\">\r\n                    <div className=\"home_header\">\r\n                        <p id=\"admin_title\">Admin console</p><br/>\r\n                        <hr style={{width:\"90%\"}}/>\r\n                        <br/>\r\n                    </div>\r\n                    {this.state.error_status.code === 401 || this.state.error_status.code === 402 ?\r\n                        <div>\r\n                            <p className=\"admin_view_title\" style={{fontSize:\"100%\"}}>{this.state.error_status.message}</p>\r\n                            <br/><br/>\r\n                            <button style={{marginTop:\"-1%\", marginBottom:\"2%\", fontSize:\"80%\"}} onClick={() => {\r\n                                localStorage.setItem(\"user_data\", '')\r\n                                this.redirect(\"/\")\r\n                            }}>Go to login page</button>\r\n                        </div>:\r\n                        <div>\r\n                            <div id=\"admin_log_view\" className=\"admin_div_view\">\r\n                                <p className=\"admin_view_title\">Message type</p>\r\n                                <select onChange={(event) => {this.fetchLogByCriteriaUpdate(\"message_type\",event.target.value)}}>\r\n                                    <option value=\"ALL\">ALL</option>\r\n                                    <option value=\"SUCCESS\">SUCCESS</option>\r\n                                    <option value=\"WARNING\">WARNING</option>\r\n                                    <option value=\"ERROR\">ERROR</option>\r\n                                </select>\r\n                                <p className=\"admin_view_title\">Source node</p>\r\n                                <select onChange={(event) => {this.fetchLogByCriteriaUpdate(\"node_address\",event.target.value)}}>\r\n                                    <option value=\"ALL\">ALL</option>\r\n                                    {availableNodesSelect}\r\n                                </select>\r\n                                <button onClick={() => this.fetchLogByCriteriaUpdate(null, null)}>&#x27F3;</button><br/><br/>\r\n                                <button style={{marginTop:\"-1%\", marginBottom:\"2%\"}}onClick={() => this.cleanLog()}>Clean log with given criteria</button>\r\n                                <br/>\r\n                                {this.state.log === null ? <p className=\"admin_view_title\">Fetching log data...</p> : \r\n                                    this.state.log.length === 0 ? \r\n                                        <p className=\"admin_view_title\">No log register found!</p> : \r\n                                        <div>\r\n                                            <p className=\"admin_view_title\" id=\"log_registers_count\">Found {this.state.log.length} log registers.</p>\r\n                                            <table>\r\n                                                <thead>\r\n                                                    <tr>\r\n                                                        <td>Address</td>\r\n                                                        <td>Message type</td>\r\n                                                        <td>Message</td>\r\n                                                        <td>Timestamp</td>\r\n                                                    </tr>\r\n                                                </thead>\r\n                                                <tbody>\r\n                                                    {logData}\r\n                                                </tbody>\r\n                                            </table>\r\n                                        </div>\r\n                                }\r\n                            </div>\r\n                            <div id=\"admin_content_view\" className=\"admin_div_view\">\r\n                                {this.state.websocket.connected === false ? \r\n                                <p className=\"admin_view_title\">Initializing the connection ...<br/><br/></p> : \r\n                                <p id=\"admin_view_title_0\" className=\"admin_view_title\">Fetching content...<br/><br/></p>}\r\n                                <br/>\r\n                                {this.state.content === null ? <p></p> : \r\n                                    this.state.content === undefined ? \r\n                                        this.state.error_status.code === 0 ? <p className=\"admin_view_title\">{this.state.error_status.message}</p> :\r\n                                        <div style={{width:\"100%\"}}>\r\n                                            <img style={{maxHeight:\"350px\", maxWidth:\"350px\"}} src= \"/images/not_found.png\" />\r\n                                            <br/><br/><br/>\r\n                                            <p className=\"admin_view_title\">No register found in the Content Table!</p>\r\n                                            <br/>\r\n                                        </div> : \r\n                                        <div className=\"content_div\" id=\"contentDiv\">\r\n                                            <table id=\"content_table\">\r\n                                                <thead>\r\n                                                    <tr>\r\n                                                        <th>User ID</th>\r\n                                                        <th>Filename</th>\r\n                                                        <th>Version No</th>\r\n                                                        <th>Hash</th>\r\n                                                        <th>Filesize</th>\r\n                                                        <th>Replicas</th>\r\n                                                        <th>Status</th>\r\n                                                    </tr>\r\n                                                </thead>\r\n                                                <tbody>\r\n                                                    {content}\r\n                                                </tbody>\r\n                                            </table>\r\n                                            <div id=\"content_table_additional_data\">\r\n                                                <p className=\"admin_view_title\">Content Status Table</p><br/>\r\n                                                <p id=\"admin_view_title_1\" className=\"admin_view_title\">&nbsp;</p><br/>\r\n                                                <hr/><br/>\r\n                                                <p className=\"admin_view_title\" \r\n                                                    id=\"subject_filename\">\r\n                                                </p><br/>\r\n                                                <div id=\"replication_nodes_div\">{replicationNodesForFile}</div>\r\n                                                <div id=\"versions_nodes_div\">{versionForFile}</div>\r\n                                            </div>\r\n                                        </div>\r\n                                }\r\n                            </div>\r\n                            <div id=\"admin_storagestatus_view\" className=\"admin_div_view\">\r\n                                {this.state.websocket.connected === false ? <p className=\"admin_view_title\">Initializing the connection ...<br/><br/></p> : \r\n                                    this.state.storagestatus === null ? \r\n                                        <p className=\"admin_view_title\">Fetching internal nodes storage status...</p> : \r\n                                        this.state.storagestatus === undefined ? \r\n                                            this.state.error_status.code === 0 ? <p className=\"admin_view_title\">{this.state.error_status.message}</p> :\r\n                                            <div style={{width:\"100%\"}}>\r\n                                                <br/><br/><br/><br/>\r\n                                                <img style={{maxHeight:\"350px\", maxWidth:\"350px\"}} src= \"/images/not_found.png\" />\r\n                                                <br/><br/><br/>\r\n                                                <p className=\"admin_view_title\">No register found in the Storage Status Table!</p>\r\n                                                <br/>\r\n                                            </div>:\r\n                                        <div>\r\n                                            {storagestatus_nodes.addresses}\r\n                                            <br/><br/>\r\n                                            <div className=\"content_div\" id=\"storageDiv\">\r\n                                                <table id=\"content_table\">\r\n                                                    <thead>\r\n                                                        <tr>\r\n                                                            <th>User ID</th>\r\n                                                            <th>Filename</th>\r\n                                                            <th>Version No</th>\r\n                                                            <th>Hash</th>\r\n                                                            <th>Another nodes</th>\r\n                                                        </tr>\r\n                                                    </thead>\r\n                                                    <tbody>\r\n                                                        {storagestatus_nodes.files}\r\n                                                    </tbody>\r\n                                                </table>\r\n                                                <div id=\"content_table_additional_data\">\r\n                                                    <p className=\"admin_view_title\">Storage Status Table</p><br/>\r\n                                                    <p id=\"admin_view_title_11\" className=\"admin_view_title\">&nbsp;</p><br/>\r\n                                                    <hr/>\r\n                                                    <p className=\"admin_view_title\" \r\n                                                        id=\"subject_filename_1\">\r\n                                                    </p><br/>\r\n                                                    <div id=\"storage_additional_data\" style={{visibility:\"hidden\"}}>\r\n                                                        <p className=\"admin_view_title\">Delete this file from this node.<br/>This will trigger a replication to another node.</p>\r\n                                                        <br/><button className=\"redirector\" onClick={this.deleteFileFromInternalNode}>Delete</button>\r\n                                                        <p className=\"admin_view_title\" id=\"storagestatus_delete_status\" style={{visibility : \"hidden\"}}>\r\n                                                            File successfully deleted from node.<br/>\r\n                                                            The change will be visible at the next update from General Manager<br/>\r\n                                                            You can also check the Replication Manager to see the workaround.\r\n                                                        </p>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                }\r\n                            </div>\r\n                            <div id=\"admin_nodes_view\" className=\"admin_div_view\">\r\n                            {this.state.websocket.connected === false ? <p className=\"admin_view_title\">Initializing the connection ...<br/><br/></p> : \r\n                                this.state.connectionTable.addresses === null ? \r\n                                    <p className=\"admin_view_title\">Fetching internal nodes status...</p> : \r\n                                    this.state.connectionTable.addresses === undefined && this.state.error_status.code === 0? \r\n                                        <p className=\"admin_view_title\">{this.state.error_status.message}</p> :\r\n                                            this.state.connectionTable.addresses === [] ? \r\n                                                <p className=\"admin_view_title\">No internal node found!</p> :\r\n                                                <div>\r\n                                                    {nodes_status.addresses}\r\n                                                    <br/><br/>\r\n                                                    <div className=\"node_status\">\r\n                                                        {nodes_status.status}\r\n                                                     </div>\r\n                                                </div>\r\n                            }\r\n                            </div>\r\n                            <div id=\"admin_replication_view\" className=\"admin_div_view\">\r\n                            {this.state.websocket.connected === false ? <p className=\"admin_view_title\">Initializing the connection ...<br/><br/></p> : \r\n                                this.state.replication_status === null ? \r\n                                    <p className=\"admin_view_title\">Fetching replication manager status...</p> : \r\n                                    this.state.replication_status === undefined ? \r\n                                        this.state.error_status.code === 0 ? <p className=\"admin_view_title\">{this.state.error_status.message}</p> :\r\n                                        <div style={{width:\"100%\"}}>\r\n                                            <br/><br/><br/><br/>\r\n                                            <img style={{maxHeight:\"350px\", maxWidth:\"350px\"}} src= \"/images/not_found.png\" />\r\n                                            <br/><br/><br/>\r\n                                            <p className=\"admin_view_title\">No register found in the Replication Manager Table!</p>\r\n                                            <br/>\r\n                                        </div> :\r\n                                    <div>\r\n                                        <div className=\"node_status\">\r\n                                            <p className=\"admin_view_title\">Replication Manager Status</p>\r\n                                            <br/><br/>\r\n                                            {replication_status}\r\n                                        </div>\r\n                                    </div>\r\n                                }\r\n                            </div>\r\n                        </div>}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AdminMainPage;\r\n\r\n//https://developer.okta.com/blog/2018/09/25/spring-webflux-websockets-react\r\n//https://dev.to/fpeluso/a-simple-websocket-between-java-and-react-5c98\r\n//https://blog.cloudboost.io/simple-chat-react-java-6923b54d65a0\r\n\r\n// https://programming.vip/docs/four-ways-of-integrating-websocket-with-spring-boot.html","import React, { Component } from 'react';\r\n\r\nimport { FileHandlerService }    from '../services/FileHandlerService';\r\nimport { GeneralPurposeService } from '../services/GeneralPurposeService';\r\nimport {UsersHandlerService} from '../services/UsersHandlerService';\r\n\r\nimport '../styles/pages-style.css';\r\nimport '../styles/pages-home-style.css';\r\nimport '../styles/pages-upload.css';\r\n\r\nclass UploadPage extends Component {\r\n    constructor(props){\r\n        super(props)\r\n        document.getElementById(\"page-name\").innerHTML = \"Upload Page\";\r\n        this.userData = JSON.parse(localStorage.getItem('user_data'))\r\n        console.log(this.userData)\r\n        this.descriptionData = null;\r\n        this.state = {\r\n            currentFile : null,\r\n            userType    : \"STANDARD\",\r\n            preview     : <p id=\"upload_data_preview\">No preview available</p>\r\n        }\r\n        this.fetchUserType().then(_ => {})\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        GeneralPurposeService.setHeaderLayout(\"USER\")\r\n        this.dragDropStyle(\"uploader\")\r\n    }\r\n\r\n    dragDropStyle = (div_name) => {\r\n        let dropArea = document.getElementById(div_name);\r\n\r\n        [\"dragover\", \"drop\"].forEach(event => {\r\n            dropArea.addEventListener(event, (e) => {e.preventDefault()}, false)\r\n        })\r\n\r\n        dropArea.addEventListener('dragover', () => {\r\n            document.getElementById(\"dropmessage\").innerHTML = \"Drop your file\"\r\n            dropArea.style.borderStyle = \"dashed\"\r\n        }, false)\r\n        dropArea.addEventListener('dragleave', () => {\r\n            document.getElementById(\"dropmessage\").innerHTML = \"\"\r\n            dropArea.style.borderStyle = \"solid\"\r\n        }, false)\r\n        dropArea.addEventListener('drop', this.handleDropFiles, false)\r\n    }\r\n\r\n    fetchUserType = () => {\r\n        return new Promise(resolve => {\r\n            try{\r\n                this.setState({userType : this.props.location.state.detail[\"user_type\"]})\r\n                resolve(null)\r\n            }\r\n            catch(e){\r\n                UsersHandlerService.getUserRole(this.userData[\"jwt\"]).then(response => {\r\n                    if(response.code === 1){\r\n                        console.log(`props fetch: ${response[\"content\"]}`)\r\n                        this.setState({userType : response[\"content\"]})\r\n                    }\r\n                    else if(response.code === 401){\r\n                        localStorage.setItem(\"user_data\", '')\r\n                    }\r\n                    resolve(null)\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    handleDropFiles = (e) => {\r\n        document.getElementById(\"upload_data\").style.display = \"block\"\r\n        document.getElementById(\"uploader\").style.display = \"none\"\r\n        document.getElementById(\"dropmessage\").innerHTML = \"\"\r\n        document.getElementById(\"uploader\").style.borderStyle = \"solid\"\r\n\r\n        let dt = e.dataTransfer\r\n        let file = dt.files[0]\r\n      \r\n        document.getElementById(\"upload_date_filename\").innerHTML = file.name\r\n        document.getElementById(\"upload_date_filesize\").innerHTML = `Size : ${Math.round(file.size / 1024 * 100) / 100} KB`\r\n        document.getElementById(\"upload_date_timedate_last_modified\").innerHTML = `Last modified : ${GeneralPurposeService.getCurrentTimestamp(file.lastModifiedDate)}`\r\n        document.getElementById(\"upload_date_timedate\").innerHTML = `Upload data : ${GeneralPurposeService.getCurrentTimestamp(new Date())}`\r\n\r\n        let fileType = GeneralPurposeService.getFileType(file.name)\r\n        if(fileType === \"image\"){\r\n            this.setState({preview : <embed id=\"upload_data_preview\" type=\"image/jpg\" src={URL.createObjectURL(file)}/>})\r\n        }\r\n        else if(fileType === \"text\"){\r\n            this.setState({preview : <iframe title={file.name} id=\"upload_data_preview\" src={URL.createObjectURL(file)} alt=\"No preview available\"></iframe>})\r\n        }\r\n        else{\r\n            this.setState({preview : <p id=\"upload_data_preview\">No preview avaialble!</p>})\r\n        }\r\n\r\n        this.setState({currentFile : file})\r\n    }\r\n\r\n    uploadFile = () => {\r\n        document.getElementById(\"dropmessage_1\").innerHTML = \"Uploading file...\"\r\n        let file_send = false\r\n        setTimeout(function(){\r\n            if(file_send === false){\r\n                document.getElementById(\"dropmessage_1\").innerHTML = \"Your file cannot be stored\"\r\n            }\r\n        }, 7500)\r\n        FileHandlerService.uploadFile(this.state.currentFile, this.userData[\"jwt\"], this.descriptionData, this.state.userType).then(response => {\r\n            if(response.code === 1){\r\n                file_send = true\r\n                document.getElementById(\"dropmessage_1\").innerHTML = response.content\r\n                document.getElementById(\"extra\").innerHTML = \"Your file will be available in a few seconds...\"\r\n            }\r\n            else if(response.code === 401){\r\n                document.getElementById(\"dropmessage_1\").innerHTML = response\r\n                console.log(`eroare : ${response}`)\r\n            }\r\n            console.log(response)\r\n        })\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div className=\"App\">\r\n                <div className=\"Home\">\r\n                    <div className=\"upload_header\">\r\n                        <p>Upload new file</p>\r\n                    </div>\r\n                    <hr/>\r\n                    <div className=\"upload_body\">\r\n                        <div className=\"upload_div\" id=\"uploader\">\r\n                            <p>Select a file or drop it here</p>\r\n                            <br/>\r\n                            <p id=\"dropmessage\"></p>\r\n                        </div>\r\n                        <div className=\"upload_div\" id=\"upload_data\">\r\n                            <p id=\"upload_date_filename\"></p>\r\n                            <br/>\r\n                            {this.state.preview}<br/>\r\n                            <p className=\"upload_data_details\" id=\"upload_date_filesize\"></p><br/>\r\n                            <p className=\"upload_data_details\" id=\"upload_date_timedate_last_modified\"></p><br/>\r\n                            <p className=\"upload_data_details\" id=\"upload_date_timedate\"></p><br/>\r\n                            <input type=\"text\" placeholder=\"Upload description\"\r\n                                onChange={(event) => {this.descriptionData = event.target.value}}/>\r\n                            <br/>\r\n                            <button className=\"upload_btn\" onClick={this.uploadFile}>Upload</button><br/>\r\n                            <button className=\"a_redirector\" id=\"selector_storage_status\" href=\"#\" onClick={() => {\r\n                                    document.getElementById(\"upload_data\").style.display = \"none\"\r\n                                    document.getElementById(\"uploader\").style.display = \"block\"\r\n                                }}>Upload another file</button><br/>\r\n                            <p id=\"dropmessage_1\"></p>\r\n                            <br style={{height:\"50%\"}}/>\r\n                            <p style={{marginTop:\"-5px\"}} id=\"extra\"></p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n};\r\n\r\nexport default UploadPage;\r\n","import React, { Component }  from 'react';\r\nimport {UsersHandlerService} from '../services/UsersHandlerService';\r\n\r\nimport { FileHandlerService }    from '../services/FileHandlerService';\r\nimport { GeneralPurposeService } from '../services/GeneralPurposeService';\r\n\r\nimport '../styles/pages-style.css';\r\nimport '../styles/pages_usermain.css';\r\nimport '../styles/pages-home-style.css';\r\n\r\nclass FileDetailsPage extends Component {\r\n    static userActions = [\"download\", \"delete\", \"rename\", \"update\", \"no-selected\"]\r\n\r\n    constructor(props){\r\n        super(props)\r\n        document.getElementById(\"page-name\").innerHTML = \"Home Page\";\r\n        this.userData = localStorage.getItem('user_data')\r\n        this.description = null\r\n        this.newname     = null\r\n        this.fileSuccessfullyDownloaded = false\r\n        this.filesize = null\r\n        this.state = {\r\n            isUserConnected            : false,\r\n            userType                   : null,\r\n            accountAvailable           : true,\r\n            accountSuccessfullyCreated : false,\r\n            currentFileName            : null,\r\n            availableNodes             : null,\r\n            fileDetails                : null,\r\n            userFile                   : null,\r\n            filePreview                : <p>No preview avaialble!</p>,\r\n            currentSelectedAction      : FileDetailsPage.userActions[4]\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        GeneralPurposeService.setHeaderLayout(\"USER\")\r\n        this.checkForConnectedUser()\r\n        this.fetchUserType().then(_ => {\r\n            let userFile = JSON.parse(localStorage.getItem('userfile'))\r\n            if(userFile !== null){\r\n                document.getElementById(\"p_filename\").innerHTML = userFile.filename\r\n                this.fileDetails(userFile)\r\n                this.setState({userFile : userFile})\r\n            }\r\n        })\r\n    }\r\n\r\n    componentDidUpdate = () => {\r\n        if(this.state.currentSelectedAction !== FileDetailsPage.userActions[4]){\r\n            FileDetailsPage.userActions.forEach(action => {\r\n                if(action !== FileDetailsPage.userActions[4]){\r\n                    document.getElementById(`selector_${action}`).style.borderBottom = \r\n                        (action === this.state.currentSelectedAction) ? \"3px solid #23049d\" : \"none\";\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    fetchUserType = () => {\r\n        return new Promise(resolve => {\r\n            try{\r\n                this.setState({userType : this.props.location.state.detail[\"user_type\"]})\r\n                resolve(null)\r\n            }\r\n            catch(e){\r\n                UsersHandlerService.getUserRole(this.userData[\"jwt\"]).then(response => {\r\n                    if(response.code === 1){\r\n                        console.log(`props fetch: ${response[\"content\"]}`)\r\n                        this.setState({userType : response[\"content\"]})\r\n                    }\r\n                    else if(response.code === 401){\r\n                        localStorage.setItem(\"user_data\", '')\r\n                    }\r\n                    resolve(null)\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    checkForConnectedUser = () => {\r\n        this.userData = localStorage.getItem('user_data')\r\n        if(this.userData === null || this.userData === ''){\r\n            this.redirect(\"\")\r\n        }\r\n        else{\r\n            this.userData = JSON.parse(this.userData)\r\n        }\r\n    }\r\n\r\n    redirect = (destination) => {\r\n        if(destination !== \"\"){\r\n            this.props.history.push(destination)\r\n        }\r\n        else{\r\n            this.props.history.push(\"/\")\r\n        }\r\n    }\r\n\r\n    fileDetails = (file) => {\r\n        FileHandlerService.getFileHistory(this.userData[\"jwt\"], file.filename).then(response => {\r\n            this.setState({fileDetails : response.content, currentFileName : file.filename}, () => {this.downloadFile()})\r\n        })\r\n    }\r\n\r\n    downloadFile = () => {\r\n        if(this.fileSuccessfullyDownloaded === true){\r\n            document.getElementById(\"file_status\").innerHTML = \"Downloading file...\"\r\n            document.getElementById(\"downloaduri\").click()\r\n            document.getElementById(\"file_status\").innerHTML = \"Downloading file...\"\r\n            console.log(this.state.userFile.filesize)\r\n            setTimeout(function(){\r\n                document.getElementById(\"file_status\").innerHTML = \"File successfully downloaded!\"\r\n            }, this.state.userFile.filesize / 1e4 / 2.5)\r\n        }\r\n        else{\r\n            FileHandlerService.downloadFile(this.userData[\"jwt\"], this.state.currentFileName).then(response => {\r\n                console.log(response.content)\r\n                document.getElementById(\"downloaduri\").href = response.content\r\n                let fileType = GeneralPurposeService.getFileType(this.state.currentFileName)\r\n                if(fileType === \"image\"){\r\n                    this.setState({filePreview : <embed type=\"image/jpg\" src={response.content}/>})\r\n                }\r\n                else if(fileType === \"text\"){\r\n                    this.setState({filePreview : <iframe title={this.state.currentFileName} src={response.content} alt=\"No preview available\"></iframe>})\r\n                }\r\n                else{\r\n                    this.setState({filePreview : <p>No preview avaialble!</p>})\r\n                } \r\n                this.fileSuccessfullyDownloaded = true\r\n            })\r\n        }\r\n    }\r\n\r\n    deleteFile = () => {\r\n        document.getElementById(\"file_status_delete\").innerHTML = \"Deleting file...\"\r\n        document.getElementById(\"delete_file_button\").style.visibility = \"hidden\"\r\n        FileHandlerService.deleteFile(this.userData[\"jwt\"], this.state.currentFileName, this.description).then(response => {\r\n            if(response.code === 1){\r\n                let global_count = 3;\r\n                let handler = this\r\n                document.getElementById(\"file_status_delete\").innerHTML = \"File successfully deleted!\"\r\n                let interval = setInterval(function(){ \r\n                    document.getElementById(\"delete_extra\").innerHTML = \"You will be redirected to main page in \" + global_count + \"...\"\r\n                    global_count -= 1\r\n                    if(global_count === -1){\r\n                        clearInterval(interval)\r\n                        handler.redirect(\"\")\r\n                    }\r\n                }, 1000);\r\n                document.getElementById(\"delete_file_button\").onclick = () => this.redirect(\"\")\r\n            }\r\n            else{\r\n                document.getElementById(\"file_status_delete\").innerHTML = response.content\r\n            }\r\n        })\r\n    }\r\n\r\n    fileDetailsAfterRename = (newFileName) => {\r\n        FileHandlerService.getFileHistory(this.userData[\"jwt\"], newFileName).then(response => {\r\n            if(response.code === 0){\r\n                let handler = this\r\n                setTimeout(function(){\r\n                    handler.fileDetailsAfterRename(newFileName)\r\n                }, 500)\r\n            }\r\n            else{\r\n                this.fileSuccessfullyDownloaded = false\r\n                this.setState({fileDetails : response.content, currentFileName : newFileName}, () => {this.downloadFile()})\r\n            }\r\n        })\r\n    }\r\n\r\n    renameFile = () => {\r\n        if(this.newname === null || this.newname === \"\"){\r\n            document.getElementById(\"file_status_rename_1\").innerHTML = \"Please provide a valid filename!\"\r\n        }\r\n        else if(GeneralPurposeService.getFileExtension(this.newname) !== GeneralPurposeService.getFileExtension(this.state.currentFileName)){\r\n            document.getElementById(\"file_status_rename_1\").innerHTML = \"You are trying to change the file type ? <br/> This is now allowed\"\r\n        }\r\n        else if(this.description === null || this.description === \"\"){\r\n            document.getElementById(\"file_status_rename_1\").innerHTML = \"Please provide a valid description!\"\r\n        }\r\n        else{\r\n            FileHandlerService.renameFile(this.userData[\"jwt\"], this.state.currentFileName, this.newname, this.description).then(response => {\r\n                if(response.code === 1){\r\n                    document.getElementById(\"file_status_rename_1\").innerHTML = \"File successfully renamed.\"\r\n                    document.getElementById(\"p_filename\").innerHTML = this.newname;\r\n                    let userFile = this.state.userFile\r\n                    userFile.filename = this.newname\r\n                    localStorage.setItem(\"userfile\", JSON.stringify(userFile))\r\n                    this.state.currentFileName = this.newname\r\n                    this.setState({userFile : userFile}, () => {\r\n                        this.fileDetailsAfterRename(this.newname)   \r\n                    })\r\n                    \r\n                }\r\n                else{\r\n                    document.getElementById(\"file_status_rename_1\").innerHTML = response.content\r\n                }\r\n\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n    updateAction = (actionIndex) => {\r\n        document.getElementById(\"download_action\").style.display = \"none\"\r\n        document.getElementById(\"delete_action\").style.display   = \"none\"\r\n        document.getElementById(\"rename_action\").style.display   = \"none\"\r\n        document.getElementById(\"update_action\").style.display   = \"none\"\r\n\r\n        document.getElementById(`${FileDetailsPage.userActions[actionIndex]}_action`).style.display = \"block\"\r\n        this.setState({currentSelectedAction: FileDetailsPage.userActions[actionIndex]})\r\n    }\r\n\r\n    render(){\r\n        var fileDetails = []\r\n        if(this.state.userType !== null){\r\n            if(this.state.fileDetails !== null){\r\n                this.state.fileDetails.forEach(detail => {\r\n                    console.log(detail)\r\n                    fileDetails.push(\r\n                        <div className=\"details_history\">\r\n                            <label>{detail.version_no} : {detail.version_hash.toString(16)}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{detail.version_desc}</label><br/><br/>\r\n                            <label>{detail.version_timestamp}</label><br/><br/><br/>\r\n                        </div>)\r\n                    fileDetails.push(<br/>)\r\n                })\r\n            }\r\n        }\r\n        return(\r\n            <div className=\"App\">\r\n                <div className=\"Home\">\r\n                    <div>\r\n                        <div className=\"home_header\" id=\"home_header_details\">\r\n                            <p id=\"p_filename\" style={{width:\"100%\",textAlign:\"center\"}}></p>\r\n                        </div>\r\n                        <hr id=\"mainpage_hr\"/>\r\n                        <br/><br/>\r\n                        <div className = \"home_body_main_div\">\r\n                            <div id=\"file_versions\">\r\n                                {this.state.userFile !== null ? \r\n                                    <div>\r\n                                        <p>Details</p>\r\n                                        <hr style={{width:\"50%\", marginBottom:\"10%\"}}/>\r\n                                        <div>\r\n                                            <label>Hash : {this.state.userFile.hash.toString(16)}</label><br/><br/>\r\n                                            <label>Size : {GeneralPurposeService.getFileSizeUnit(this.state.userFile.filesize)}</label><br/><br/>\r\n                                            <label>Version : {this.state.userFile.version}</label><br/>\r\n                                        </div>\r\n                                        <br/><br/>\r\n                                        <p>History</p>\r\n                                        <hr style={{width:\"50%\", marginBottom:\"10%\"}}/>\r\n                                        {fileDetails}\r\n                                    </div> : <p></p>\r\n                                }\r\n                            </div>\r\n                            <div id=\"previews\">\r\n                                {this.state.filePreview}\r\n                            </div>\r\n                            <div id=\"file_details\">\r\n                                <p>Actions</p>\r\n                                <hr/>\r\n                                <button className=\"a_redirector\" id=\"selector_download\" style={{fontSize:\"90%\"}} \r\n                                    onClick={() => {\r\n                                        this.updateAction(0)\r\n                                        this.downloadFile()\r\n                                    }}>Download\r\n                                </button>\r\n                                <button className=\"a_redirector\" id=\"selector_delete\"  style={{fontSize:\"90%\"}} onClick={() => this.updateAction(1)}>Delete</button>\r\n                                <button className=\"a_redirector\" id=\"selector_rename\"  style={{fontSize:\"90%\"}} onClick={() => this.updateAction(2)}>Rename</button>\r\n                                <button className=\"a_redirector\" id=\"selector_update\"  style={{fontSize:\"90%\"}} onClick={() => this.updateAction(3)}>Update</button>\r\n                                <a id=\"downloaduri\" href=\"/\" download>&nbsp;</a><br/>\r\n                                <div className=\"action_div\" id=\"download_action\">\r\n                                    <p id=\"file_status\"></p>\r\n                                </div>\r\n                                <div className=\"action_div\" id=\"delete_action\">\r\n                                    <p id=\"file_status_delete\">The erasing procedure is irreversible.<br/> \r\n                                        Your files will be deleted permanently.<br/><br/>\r\n                                        Do you want to proceed ? \r\n                                    </p><br/>\r\n                                    <p id=\"delete_extra\"></p><br/>\r\n                                    <button id=\"delete_file_button\" style={{fontSize:\"80%\", padding : 0, paddingLeft:\"5px\", paddingRight:\"5px\", height:\"40px\"}} \r\n                                        onClick={() => this.deleteFile()}>Delete my file\r\n                                    </button>\r\n                                </div>\r\n                                <div className=\"action_div\" id=\"rename_action\">\r\n                                    <p id=\"file_status_rename\">Please provide the new file name<br/></p>\r\n                                    <input\r\n                                        onChange={(event) => {this.newname = event.target.value}} \r\n                                        type=\"text\" />\r\n                                    <br/>\r\n                                    <p id=\"file_status_rename\">Please also provide a description for your update<br/></p>\r\n                                    <input\r\n                                        onChange={(event) => {this.description = event.target.value}} \r\n                                        type=\"text\" /><br/><br/>\r\n                                    <button id=\"rename_file_button\" style={{fontSize:\"80%\", padding : 0, paddingLeft:\"5px\", paddingRight:\"5px\", height:\"40px\"}} \r\n                                        onClick={() => this.renameFile()}>Rename my file\r\n                                    </button>\r\n                                    <p id=\"file_status_rename_1\"><br/></p>\r\n\r\n                                    <br/><br/>\r\n                                </div>\r\n                                <div className=\"action_div\" id=\"update_action\">\r\n                                    <p id=\"file_status_update\">\r\n                                        Direct update of file is not supported yet<br/><br/>\r\n                                        Please update your file locally and upload it<br/>\r\n                                        Consider keeping the same name for file<br/><br/>\r\n                                        The new version will be registered<br/><br/>\r\n                                    </p>\r\n                                    <button id=\"rename_file_button\" style={{fontSize:\"80%\", padding : 0, paddingLeft:\"5px\", paddingRight:\"5px\", height:\"40px\"}} \r\n                                        onClick={() => this.redirect(\"/upload\")}>Go to upload page\r\n                                    </button>\r\n                                </div>\r\n                                <div className=\"request_description\">\r\n                                    <p id=\"input_label\">New name : </p>\r\n                                    <input\r\n                                        onChange={(event) => {this.newname = event.target.value}} \r\n                                        type=\"text\" />\r\n                                </div>\r\n                                <div className=\"request_description\">\r\n                                    <button className=\"file_button\" id=\"proceed_btn\" onClick={() => this.renameFile(1)}>Rename</button>\r\n                                </div>\r\n                                <br/>\r\n                                <p id=\"file_status\"></p>\r\n                            </div>\r\n                        </div>\r\n                    </div> \r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default FileDetailsPage;","import React                   from 'react';\nimport ReactDOM                from 'react-dom';\nimport { BrowserRouter, Route} from \"react-router-dom\";\n\nimport StartPage       from './pages/StartPage';\nimport ProfilePage     from './pages/ProfilePage';\nimport MainUserPage    from './pages/MainUserPage';\nimport AdminMainPage   from './pages/AdminMainPage';\nimport UploadPage      from './pages/UploadPage';\nimport FileDetailsPage from './pages/FileDetailsPage';\n\nimport './styles/index.css';\n\n\nReactDOM.render(\n  <BrowserRouter>\n    <Route exact path=\"/\"        component={StartPage} />\n    <Route exact path=\"/profile\" component={ProfilePage} />\n    <Route exact path=\"/uhome\"   component={MainUserPage} />\n    <Route exact path=\"/ahome\"   component={AdminMainPage} />\n    <Route exact path=\"/upload\"  component={UploadPage}/>\n    <Route exact path=\"/details\" component={FileDetailsPage}/>\n  </BrowserRouter>,\n  document.getElementById('root'),\n);"],"sourceRoot":""}